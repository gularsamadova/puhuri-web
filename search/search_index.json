{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Puhuri documentation web site!","text":"<p>Puhuri platform is a set of integrated services for managing access to shared resources in a federated manner. This site is aimed at providing a high level technical information about Puhuri service for target stakeholders.</p>"},{"location":"#breaking-changes","title":"Breaking changes","text":"<ul> <li>15.11.2022: api/marketplace-plans/ endpoint has been changed to api/marketplace-public-plans/ for creating orders.</li> </ul>"},{"location":"#outline","title":"Outline","text":"<ul> <li>Architecture provides a top level overview of Puhuri architecture.</li> <li>Resource Allocators is aimed at organization allocating shared resources.</li> <li>Identity Providers is aimed at organization providing information about users' identities.</li> <li>Service Providers is aimed at organizations hosting shared resources.</li> <li>Documents contains document templates that parties are expected to agree and sign.</li> <li>Environments contains descriptions of development and production environments.</li> </ul>"},{"location":"#introduction","title":"Introduction","text":""},{"location":"#contacts","title":"Contacts","text":"<p>Please see https://neic.no/puhuri/.</p>"},{"location":"architecture/","title":"Architecture","text":""},{"location":"architecture/#overview","title":"Overview","text":"<p>This page introduces the Puhuri components and high level architecture. </p>"},{"location":"architecture/#puhuri-components","title":"Puhuri Components","text":"<p>The diagram above shows a high level architecture of Puhuri. Puhuri links together Users with strong digital identity with Resources in a seamless way.</p> <p>Puhuri is using MyAccessID AAI for user registration that can be started from National Portal of Resource Allocators or from Puhuri Portal, which is provided as a reference solution. The registration process creates a unique identifier (Community Unique Identifier, CUID) for the user, which is used for referencing and linking user identity across the different components.</p> <p></p> <p>The identity provider releases the attributes about User\u2019s identity and affiliation, which is important for the resource providers to know. User can also register SSH public keys for easier access to the Linux-based systems that are accessible in Puhuri. </p> <p>Puhuri Core is an API service for Resource Allocators that allows to manage Projects, Members (using CUID of Puhuri users) as well as Resource Allocations. A Resource provider (in Figure above - LUMI) then imports the allocation and project membership information from the Puhuri Core and sets up the services for access using MyAccessID user account. Resource provider also reports on the usage of resource allocations as well as provides additional data, like Linux usernames, that user might need in order to access the Resource.</p> <p>Puhuri Core has an offline access to MyAccessID user registry and uses it for keeping user information up to date.</p>"},{"location":"architecture/#puhuri-roles","title":"Puhuri roles","text":"<p>User applies for a Resource Allocation and then manage the Members of the Project using a Puhuri Portal, hosted by University of Tartu, or via a National Portal, depending which solution is available for User.</p> <p>The Resource application review process happens outside of Puhuri. The national portals are expected to push approved projects and resources  to Puhuri Core. The Principal Investigator (PI) creates project in the Puhuri Portal or National Portal. The submission is then accepted by the Resource Allocator, which is responsible for the particular application\u2019s resource granting. Then the project information is propagated to Puhuri Core and from there synchronised to the Resource Provider. In addition to Project description and members, also the Resource-specific resource allocation attributes are included. </p> <p>A national portal may implement identity linking of local accounts with Puhuri AAI account. The recommended way for that is to use OIDC registration flow, which can be triggered from the national portal  and lead to  redirection back with a created Puhuri User CUID</p>"},{"location":"architecture/#puhuri-model","title":"Puhuri model","text":"<p>Information model of Puhuri. Please note that the terminology used in this documentation differs occasionally of this planned information model. </p>"},{"location":"branding/","title":"Branding","text":""},{"location":"branding/#logos","title":"Logos","text":"<p>Puhuri logo:</p> <p> Download here</p> <p>Puhuri logo (negative):</p> <p> Download here</p> <p>Puhuri Portal logo for light background:</p> <p> Download here</p> <p>Puhuri Portal logo for dark background:</p> <p> Download here</p> <p>Puhuri Core logo for light background:</p> <p> Download here</p> <p>Puhuri Core logo for dark background:</p> <p> Download here</p>"},{"location":"branding/#logo-guideline","title":"Logo guideline","text":"<p>Font and colors:</p> <p></p>"},{"location":"environments/","title":"Environments","text":""},{"location":"environments/#puhuri-aai","title":"Puhuri AAI","text":"<p>TBA</p>"},{"location":"environments/#puhuri-core","title":"Puhuri Core","text":"<p>Puhuri provides several environments for the resource allocators:</p> <ul> <li>Development https://puhuri-core-dev.neic.no/api/</li> <li>Demo: https://puhuri-core-beta.neic.no/api/</li> <li>Production: https://puhuri-core.neic.no/api/</li> </ul>"},{"location":"environments/#accounts","title":"Accounts","text":"<p>Resource allocators are eligible to one or more user accounts. For production environments, we expect service provider's representative to pass the following data:</p> <ul> <li>Names, abbreviations, contact email and optionally web sites of each Allocator.</li> <li>For each of the allocators, access subnets from where the requests can be made should be provided.</li> <li>For each of the allocators, amount and purposes of allocator user accounts -- will be used for generating integration user accounts.   We suggest to minimize number of such accounts per allocator to avoid potential overlap. All such accounts will have   equal power. A single account is a valid number.</li> </ul> <p>Please reach out to support@hpc.ut.ee to get one for Demo environment.</p>"},{"location":"environments/#puhuri-portal","title":"Puhuri Portal","text":"<p>Puhuri provides several environments for the reference client portal aka Puhuri Portal.</p> <p>You can:</p> <ul> <li>self-host Puhuri Portal (docker-compose or Helm-based) - please reach out to support@hpc.ut.ee if you are   interested in instructions;</li> <li>request a managed version of Puhuri Portal from University of Tartu. Please reach out to support@hpc.ut.ee in this   case too.</li> </ul> <p>TODO: Add link to the ToS documents.</p>"},{"location":"environments/#customizing-managed-puhuri-portal","title":"Customizing managed Puhuri Portal","text":""},{"location":"environments/#custom-languages","title":"Custom languages","text":"<p>In addition to English, Puhuri Portal can be used in additional languages. Currently available options are:</p> <ul> <li>Czech</li> <li>Danish</li> <li>Dutch</li> <li>Dutch</li> <li>Estonian</li> <li>French</li> <li>Italian</li> <li>Lithuanian</li> <li>Norwegian</li> <li>Spanish</li> </ul> <p>We try to maintain translations, but feedback from domain specialists and native speakers is very welcome.</p>"},{"location":"environments/#custom-dns","title":"Custom DNS","text":"<p>If you want to use a custom domain for your Puhuri Portal, e.g. lumi.myorganization.eu, you need to set the DNS records to point to the deployment in University of Tartu.</p> <ul> <li>option a) Add A records to point to <code>193.40.36.55</code> and <code>193.40.36.57</code>.</li> <li>option b) Add CNAME record: <code>IN CNAME web.cs.ut.ee</code>.</li> </ul>"},{"location":"environments/#allowing-sending-out-email-under-custom-domain","title":"Allowing sending out email under custom domain","text":"<p>Puhuri Portal needs to send out email on different occasions. In order to reduce chance of email being marked as spam, you need to make sure that the following record is added in the DNS:</p> <p><code>TXT \"v=spf1 mx a:mailhost.ut.ee -all\"</code></p>"},{"location":"environments/#https-certificates","title":"HTTP(S) certificates","text":"<p>Puhuri Portal exposes services on encrypted endpoints, for HTTPS to validate without issues, its certificate must match the domain name.</p> <p>Currently two options are supported:</p> <ul> <li>Getting certificates using Letsencrypt and http01 validation schema;</li> <li>Using custom certificates provided by the organization. Please reach out to support@hpc.ut.ee for details on secure   transfer of credentials.</li> </ul>"},{"location":"integration-with-puhuri-aai/","title":"Registering with Puhuri AAI Proxy","text":""},{"location":"integration-with-puhuri-aai/#overview","title":"Overview","text":"<p>This article describes the process of registering a service with the Puhuri AAI Proxy.</p> <p>To do so, you will need to fill in the service registration form at:</p> <ul> <li>https://webapp.prod.puhuri.eduteams.org/sp_request (for production environment )</li> <li>https://webapp.acc.puhuri.eduteams.org/sp_request (for acceptance environment)</li> </ul> <p>Before sending in the application for registration, please make sure that application is complete or else the registration will not be approved.</p>"},{"location":"integration-with-puhuri-aai/#filling-in-the-service-registration-form","title":"Filling in the Service registration form","text":""},{"location":"integration-with-puhuri-aai/#requester-details","title":"Requester Details","text":"<ul> <li> <p><code>Display name</code> - Already pre filled from your MyAccessID profile</p> </li> <li> <p><code>Email</code> - Already pre filled from your MyAccessID profile</p> </li> <li> <p><code>Organization</code> - If it is not prefilled, please enter the name of your organization. This can be different from the organization / legal entity providing the service</p> </li> </ul> <p></p>"},{"location":"integration-with-puhuri-aai/#organization-information-legal-entity-responsible-for-the-service","title":"Organization Information - Legal entity responsible for the service","text":"<ul> <li> <p><code>Organization Name</code> - The name of the organization responsible for the service. This information will be visible to the end users.</p> </li> <li> <p><code>Organization Website</code> - The website of the organization responsible for the service. This information will be visible to the end users.</p> </li> </ul> <p></p>"},{"location":"integration-with-puhuri-aai/#service-details","title":"Service Details","text":"<ul> <li> <p><code>Service Name</code> - The name of the service that is subject of your request for connecting to Puhuri AAI proxy. This information will be visible to the end users.</p> </li> <li> <p><code>Service Website (URL)</code> - The URL of the website or landing page for the service. This information will be visible to the end users.</p> </li> <li> <p><code>Service Logo (URL)</code> - A URL with the logo / icon of the service.</p> </li> <li> <p><code>Service Description</code> - Brief description of the service. This information will be visible to the end users.</p> </li> </ul> <p></p>"},{"location":"integration-with-puhuri-aai/#contact-information","title":"Contact Information","text":"<p>Email addresses for administrative, security and technical contacts or teams responsible for the service. This information will be visible to the end users.</p> <p></p>"},{"location":"integration-with-puhuri-aai/#service-provider-policies","title":"Service Provider Policies","text":"<ul> <li> <p><code>Privacy Notice (URL)</code> - A URL pointing to the privacy notice of the service. A good example of what an Privacy Notice should contain can be found at REFEDS wiki. This information will be visible to the end users.</p> </li> <li> <p><code>Acceptable Usage Policy / Terms of Use</code> - A URL pointing to the Acceptable Usage Policy and/or Terms of Use of the service. Consider using the WISE Baseline AUP template</p> </li> <li> <p><code>G\u00c9ANT Data Protection Code of Conduct</code> - Click the check box if the service is compliant with the G\u00c9ANT Code of Conduct. You can find more information about the G\u00c9ANT Code of Contact at REFEDS wiki</p> </li> <li> <p><code>Sirtfi</code> - Click the checkbox if the service is compliant with Sirtfi. You can find more information about the Sirtfi framework at REFEDS website</p> </li> <li> <p><code>Research and Scholarship</code> - Click the check box if the service is compliant with Research and Scholarship entity category. Usage of Research and Scholarship entity category is mandatory for all services connected to PUHURI Proxy. You can find more information about the Research and Scholarship entity category at REFEDS website</p> </li> <li> <p><code>Incident Response Policy (URL)</code> - A URL pointing to the Incident Response policy applicable to the service. This is an optional field.</p> </li> </ul>"},{"location":"integration-with-puhuri-aai/#technical-information-for-registering-the-service-provider","title":"Technical information for registering the Service Provider","text":"<p>SAML or OIDC - Choose SAML for registering a SAML Service Provider</p> <ul> <li> <p>Registering a SAML Service provider </p> <ul> <li> <p><code>SP is part of eduGAIN</code> - If the Service Provider is already available in eduGAIN through a participating federation click this checkbox</p> </li> <li> <p><code>SAML2 Entity ID</code> - This textbox is only visible if you have selected that the SP is available in eduGAIN. Provide the SAML2 entityID for the service. </p> </li> <li> <p><code>SAML2 Metadata (URL)</code> - This textbox is only visible if you have NOT selected that the SP is available in eduGAIN. Provide the URL pointing to the SAML2 metadata of the service.</p> </li> </ul> </li> <li> <p>Registering an OIDC Service Provider</p> <ul> <li> <p><code>Flow</code> - Choose the OpenID Connect / OAuth2 flow applicable for your service. Options are Authorization Code and Implicit. The use of Authorization Code is strongly recommended.</p> </li> <li> <p><code>Token Endpoint Authentication Method</code> - Choose the token endpoint authentication method for your service. Options are client_secret_basic and client_secret_post.</p> </li> <li> <p><code>Offline access</code> - If the service requires offline access, check this checkbox. For services connecting to PUHURI proxy will not need this option. </p> </li> <li> <p><code>OIDC Redirect URLs</code> - Enter one or more OIDC redirect URLs for your service</p> </li> </ul> </li> </ul> <p></p>"},{"location":"integration-with-puhuri-aai/#form-submission","title":"Form submission","text":"<p>When you click on the \"Submit\" button, you will see a page confirming your application request. </p> <p>You will get the secret displayed after submitting the registration form. Store that in a secure place as you will need it for configuring.</p> <p>Your application will be reviewed by the eduTEAMS and Puhuri Support team and you will be notified via email.</p>"},{"location":"resource-allocators/","title":"Integration guide","text":""},{"location":"resource-allocators/#resource-allocators","title":"Resource allocators","text":"<p>Allocators are external parties that are entitled to manage projects and resource allocations in Puhuri Core. In the scope of Puhuri, resource allocators are typically organizations operating national portals or research communities.</p> <p>Resource allocator is expected to:</p> <ol> <li>Be eligible to share specific resources, e.g. LUMI share.</li> <li>Be aware of the Researcher Access identifiers of the users, aka CUIDs.</li> </ol>"},{"location":"resource-allocators/#terminology","title":"Terminology","text":"<p>Puhuri Core is based on Waldur orchestrator and as such some of the APIs use a different naming than agreed in Puhuri. Below is a mapping to reduce confusion.</p> Puhuri API / Waldur Resource Offering Resource component Offering component Allocation Resource"},{"location":"resource-allocators/#puhuri-core-sdk","title":"Puhuri Core SDK","text":"<p>If you are integrating a python-based application, you might find useful a python wrapper for typical operations.</p> <p>You can also find allocation management documentation here.</p>"},{"location":"resource-allocators/#common-operations","title":"Common operations","text":"<p>Almost all operations require authentication. Authentication process is a two-step:</p> <ol> <li>Generation of authentication token using Authentication API.</li> <li>Passing that token in the Authorization header along with all other REST API calls.</li> </ol> <p>Please note that all of the responses to the listing are paginated, by default up to 10 elements are returned. You can request more by passing <code>page_size=&lt;number&gt;</code> argument, number up to 200 will be respected. Information about the whole set is contained in the response headers. Check example of a \"get_all\" function to see how a full traversal can be done.</p>"},{"location":"resource-allocators/#project-management","title":"Project management","text":""},{"location":"resource-allocators/#customer-lookup","title":"Customer lookup","text":"<p>Puhuri Core implements a multi-tenant model to allow different organizations to allocate shared resources simultaneously and independently from each other. Each such organizaton is a customer of Puhuri Core and is able to create its own projects. Project allows us to create new allocations as well as connect users with the project.</p> <p>Hence, to create a project, one needs first to have a reference to the customer. The reference is a stable one and can be cached by a REST API client.</p> <p>Customers are created by Puhuri Core support team. Please reach out to support@hpc.ut.ee if you think you should have one.</p> <p>Examples:</p> <ul> <li>API call for customer lookup</li> </ul>"},{"location":"resource-allocators/#project-creation","title":"Project creation","text":"<p>In order to create a new project in an organization, user needs to provide the following fields:</p> <ul> <li><code>customer</code> - URL of the project's organization</li> <li><code>name</code> - project's name</li> <li><code>description</code> - description of a project description</li> <li><code>end_date</code> - optional date when the project and all allocations it contains will be scheduled for termination.</li> <li><code>backend_id</code> - optional identifier, which is intended to be unique in the resource allocator's project list. Can be   used for connecting Puhuri Core projects with the client's project registry.</li> <li><code>oecd_fos_2007_code</code> - optional OECD Field of Science code. A code is represented by a string with two numbers separated by dot for a corresponding field of science. For example <code>\"1.1\"</code> is code for Mathematics. More information can be found here.</li> </ul> <p>Please note that the project becomes active at the moment of creation!</p> <p>Examples:</p> <ul> <li>API call for project creation</li> <li>Project creation in Puhuri Portal.</li> </ul>"},{"location":"resource-allocators/#project-update","title":"Project update","text":"<p>It is possible to update an existing project using its URL link. Name, description and backend_id can be updated.</p> <p>Examples:</p> <ul> <li>API call for project update</li> </ul>"},{"location":"resource-allocators/#project-lookup","title":"Project lookup","text":"<p>User can list projects and filter them using the following query parameters:</p> <ul> <li><code>name</code> - project's name (uses 'contains' logic for lookup)</li> <li><code>name_exact</code> - project's exact name</li> <li><code>description</code> - project's description (uses 'contains' logic for lookup)</li> <li><code>backend_id</code> - project's exact backend ID</li> </ul> <p>In case API user has access to more than one customer, extra filter by customer properties can be added:</p> <ul> <li><code>customer</code> - exact filter by customer UUID</li> <li><code>customer_name</code> - filter by partial match of the full name of a customer</li> <li><code>abbreviation</code> - filter by partial match of the abbreviation of a customer</li> </ul> <p>Examples:</p> <ul> <li>API call for listing  of projects</li> </ul>"},{"location":"resource-allocators/#project-membership-management","title":"Project membership management","text":""},{"location":"resource-allocators/#puhuri-aai-user-mapping-lookup","title":"Puhuri AAI user mapping lookup","text":"<p>Puhuri Core maintains its own set of user records. Project membership is essentially a link between a project and user, carrying also information about the role name.</p> <p>A mapping from the Puhuri AAI CUID is implemented as a separate call. Resource allocator is able to send the CUID, which would return a link to Puhuri Core user identity or error message, if this was not possible (e.g. CUID is incorrect or connection with Puhuri AAI user registry has failed). Note that endpoint returns UUID, full URL of the user is constructed as Puhuri Core URL + <code>/api/users/USER_UUID/</code>.</p> <p>Examples:</p> <ul> <li>API call for getting a mapping of Puhuri AAI user CUID to Puhuri Core user</li> </ul>"},{"location":"resource-allocators/#membership-management","title":"Membership management","text":"<p>Creating a membership for a user means creating a permission link. While multiple roles of a user per project are allowed, we recommed for clarity to have one active project role per user in a project.</p> <p>The list of fields for creation are:</p> <ul> <li><code>user</code> - a user's URL, looked up from a previous step</li> <li><code>project</code> - a URL of a project where the permission needs to be created.</li> <li><code>role</code> - a role of the user. 'member', 'admin' and 'manager' are supported. TODO: add reference to Puhuri terminology.</li> </ul> <p>Each permission has a unique URL. To remove the permission, REST API client needs to send a DELETE HTTP request to that URL.</p> <p>It is also possible to list available project permissions along with a various filters. Users can list permissions for all projects in their visibility range. To limit the permission set to a specific project or user, the following filters are supported:</p> <p>Possible query params for filtering:</p> <ul> <li><code>project</code> - a projects's UUID</li> <li><code>project_url</code> - a projects's URL</li> <li><code>user</code> - a user's UUID</li> <li><code>user_url</code> - a user's URL</li> <li><code>username</code> - a user's username (aka CUID)</li> <li><code>full_name</code> - a user's full name</li> <li><code>customer</code> - an organization's UUID</li> <li><code>role</code> - a role's name</li> </ul> <p>Examples:</p> <ul> <li>API call for allocating members to a project</li> <li>API call for removing members from a project</li> <li>API call to listing project permissions</li> </ul>"},{"location":"resource-allocators/#resource-allocation-management","title":"Resource allocation management","text":"<p>Creating and managing resource allocations in Puhuri Core follows ordering logic.</p> <p>All operations on resources, which lead to changes in allocations - e.g. creation, modification of allocated limits or termination - are wrapped in an order. It is possible to have multiple actions of the same type in one order. Such actions are called Order items.</p>"},{"location":"resource-allocators/#listing-offerings","title":"Listing offerings","text":"<p>To create a new Allocation, one must first choose a specific Offering from available. Offering corresponds to a specific part of a shared resource that Resource Allocator can allocate. For example, it can be a national share of LUMI resources. Offerings can be visible to multiple allocators, however in the first iteration we plan to limit allocators with access to only their owned shares.</p> <p>User can fetch offerings and filter them by the following fields:</p> <ul> <li><code>name</code> - offering's name</li> <li><code>name_exact</code> - offering's exact name</li> <li><code>customer</code> - organization's URL</li> <li><code>customer_uuid</code> - organization's UUID</li> </ul> <p>Generally Offering has a stable UUID, which can be used in Puhuri Core client configuration. Offering defines inputs that are required to provision an instance of the offering, available accounting plans (at least one should be present) as well as attributes that can or should be provided with each request.</p> <p>Each Offering contains one or more plans, you will need to provide a reference (URL) to the plan when creating an allocation.</p> <p>API examples:</p> <ul> <li>Getting a list of offerings available for allocation</li> </ul>"},{"location":"resource-allocators/#selecting-an-offering-lumi-specific","title":"Selecting an offering (LUMI specific)","text":"<p>In case of LUMI allocation, there are several offerings available for each allocator corresponding to the access types defined by EuroHPC JU.</p> <p>Offerings types are:</p> <ul> <li>Extreme Scale Access</li> <li>Regular Access</li> <li>Benchmark Access</li> <li>Development Access</li> <li>Fast Track Access for Academia</li> <li>Fast Track Access for Industry Access</li> </ul> <p>During the integration period for convenience we use the following convention for offering names: <code>LUMI &lt;Country name&gt; / &lt;access type&gt;</code>, e.g. <code>LUMI Sweden / Extreme Scale Access</code> or <code>LUMI Finland / Regular Access</code>. Each of the offering will include a single plan.</p> <p>Full details of the Offering contain expected attributes that should be passed when creating an allocation.</p>"},{"location":"resource-allocators/#orders-order-items-and-resources","title":"Orders, order items and resources","text":"<p>To create a new allocation, an order must be created contain order item with requested attributes: project as well as details about the allocations.</p> <p>Order might require additional approval - in this case upon creation its status will be <code>REQUESTED FOR APPROVAL</code>, which can transition to <code>REJECTED</code> if order is rejected. Otherwise it will be switched to <code>EXECUTING</code>, ending either in <code>DONE</code> if all is good or <code>ERRED</code>, if error happens during the processing.</p> <p>Within an order, an order item is expected correspondingly to a single allocation to be created. You can provide multiple order items within a single order, but all of them have to be of the same type, i.e. <code>CREATE</code>, <code>UPDATE</code> or <code>TERMINATE</code>.</p> <p>As a result of successful processing of order item by Puhuri Core, it will create a new Resource. Its UUID will be available as a <code>marketplace_resource_uuid</code> field of the creation order item.</p> <p>In addition, <code>accepting_terms_of_service</code> flag must be provided as a lightweight confirmation that allocator is aware and agreeing with Terms of services of a specific Offering.</p> <p>Example of the order payload sent with <code>POST</code> to <code>https://puhuri-core-beta.neic.no/api/marketplace-orders/</code>:</p> <pre><code>{\n\"project\": \"https://puhuri-core-beta.neic.no/api/projects/72fff2b5f09643bdb1fa30684427336b/\",\n\"items\": [\n{\n\"offering\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/0980e9426d5247a0836ccfd64769d900/\",\n\"attributes\": {\n\"name\": \"test20\",\n},\n\"limits\":{\n\"gb_k_hours\": 30,\n\"cpu_k_hours\": 1,\n\"gpu_k_hours\": 20\n},\n\"plan\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/14b28e3a1cbe44b395bad48de9f934d8/\",\n\"accepting_terms_of_service\": true\n}\n]\n}\n</code></pre>"},{"location":"resource-allocators/#change-resource-limits","title":"Change resource limits","text":"<p>Send <code>POST</code> request to <code>https://puhuri-core-beta.neic.no/api/marketplace-resources/&lt;UUID_OF_A_RESOURCE&gt;/update_limits/</code> providing the new values of limits, for example:</p> <pre><code>{\n\"limits\": {\n\"gb_k_hours\": 35,\n\"cpu_k_hours\": 6,\n\"gpu_k_hours\": 200\n}\n}\n</code></pre>"},{"location":"resource-allocators/#resource-termination","title":"Resource termination","text":"<p>Send <code>POST</code> request to <code>https://puhuri-core-beta.neic.no/api/marketplace-resources/&lt;UUID_OF_A_RESOURCE&gt;/terminate/</code>.</p> <p>API examples:</p> <ul> <li>Creation of a resource allocation</li> <li>Modification of a resource allocation</li> <li>Termination of a resource allocation</li> </ul> <p>Example integrations:</p> <ul> <li>Lookup of available offerings in Puhuri Portal.</li> <li>Creation of a resource in Puhuri Portal.</li> <li>Changing allocated limits in Puhuri Portal.</li> <li>Deletion of a resource allocation in Puhuri Portal.</li> </ul>"},{"location":"resource-allocators/#advanced","title":"Advanced","text":"<p>Information about Puhuri resources in Puhuri Core can change over time, for example, new components could be added. Puhuri Portal implements a method for dynamic import and upkeep of that information from Puhuri Core.</p> <p>As this is a more advanced topic, please check implementation. If you have questions, we will be happy to help out! Please reach out to support@hpc.ut.ee.</p>"},{"location":"resource-allocators/#reporting","title":"Reporting","text":""},{"location":"resource-allocators/#getting-usage-data-of-a-specific-resource-allocation","title":"Getting usage data of a specific resource allocation","text":"<p>To get reported usage for resources, send  <code>GET</code> request to <code>https://puhuri-core-beta.neic.no/api/marketplace-component-usages/</code>. If you want to get usage data of a specific resource, please add a filter, e.g. <code>https://puhuri-core-beta.neic.no/api/marketplace-component-usages/?resource_uuid=&lt;UUID_OF_A_RESOURCE&gt;</code>. Note that responses are paginated.</p> <p>Additional filters that can be used:</p> <ul> <li><code>date_before</code> - date of the returned usage records should be before or equal to provided, format YYYY-MM-DD, e.g. 2021-03-01.</li> <li><code>date_after</code> - date of the returned usage records should be later or equal to provided, format YYYY-MM-DD, e.g. 2021-03-01.</li> <li><code>offering_uuid</code> - return usage records only for a specified offering.</li> <li><code>type</code> - type of the usage record to return, e.g. 'cpu_k_hours'.</li> </ul> <p>Response will contain a list of usage records with a separate record for each component per month, for example:</p> <pre><code>  {\n\"uuid\": \"15a7a55fc78d44f995a6735b1f0f0c86\",\n\"created\": \"2021-11-26T20:30:21.348221Z\",\n\"description\": \"\",\n\"type\": \"cpu_k_hours\",\n\"name\": \"CPU allocation\",\n\"measured_unit\": \"CPU kH\",\n\"usage\": 12,\n\"date\": \"2021-11-26T20:30:21.342018Z\",\n\"resource_name\": \"Sample allocation\",\n\"resource_uuid\": \"4e4b8910b3df4ca0969871922eed8f3d\",\n\"offering_name\": \"LUMI UoI / Fast Track Access for Industry Access\",\n\"offering_uuid\": \"abe3c5e7cbe14d97a3208c56a22251f4\",\n\"project_name\": \"University of Iceland / Sample project\",\n\"project_uuid\": \"e1ffec53fd494d438fcb71daee1ae375\",\n\"customer_name\": \"University of Iceland\",\n\"customer_uuid\": \"6b4aba63ed47472e9cee84dac500cf11\",\n\"recurring\": false,\n\"billing_period\": \"2021-11-01\"\n},\n{\n\"uuid\": \"2b90e7f5f91d41b7838bc0d45093dd23\",\n\"created\": \"2021-11-26T20:30:21.383305Z\",\n\"description\": \"\",\n\"type\": \"gb_k_hours\",\n\"name\": \"Storage allocation\",\n\"measured_unit\": \"GB kH\",\n\"usage\": 34,\n\"date\": \"2021-11-26T20:30:21.342018Z\",\n\"resource_name\": \"Sample allocation\",\n\"resource_uuid\": \"4e4b8910b3df4ca0969871922eed8f3d\",\n\"offering_name\": \"LUMI UoI / Fast Track Access for Industry Access\",\n\"offering_uuid\": \"abe3c5e7cbe14d97a3208c56a22251f4\",\n\"project_name\": \"University of Iceland / Sample project\",\n\"project_uuid\": \"e1ffec53fd494d438fcb71daee1ae375\",\n\"customer_name\": \"University of Iceland\",\n\"customer_uuid\": \"6b4aba63ed47472e9cee84dac500cf11\",\n\"recurring\": false,\n\"billing_period\": \"2021-11-01\"\n}\n</code></pre>"},{"location":"service-providers/","title":"Integration Guide","text":"<p>A Service Provider (SP) can operate over resources as well as manage resource allocations requested by other organizations.</p> <p>A typical flow of operations is as follows:</p> <ol> <li>Organization representing allocation body creates allocation in a certain project. Allocations are created in 'Creating' state.</li> <li>Service provider polls for new allocations and users with access to them, processes them and marks allocations as approved or rejected. Service provider also reports to Puhuri Core local username created for the user accounts as well as local references to allocations.</li> <li>Service provider regularly reports back accounting data as well as can provide status report for allocation (a semi-structured report visible to end-users).</li> </ol> <p>SDK Guide provides description for resource allocation management methods performed via Python 3 SDK for Puhuri Core.</p>"},{"location":"service-providers/#management-of-resource-allocators","title":"Management of Resource Allocators","text":"<p>Service Provider is in charge of managing Resource Allocators for its resources. Representative of the Service Provider should submit the initial list as well as updates to the support channel of Puhuri Core operator: support@hpc.ut.ee.</p> <p>The following information must be provided for each Resource Allocator:</p> <ol> <li>Name</li> <li>Abbreviation</li> <li>Subnet in CIDR format from where access to Puhuri Core will be done</li> <li>Contact email</li> <li>Contact phone</li> <li>URL of organization</li> </ol> <p>Contact email will be used for establishing a communication channel from operator to allocator for providing and managing integration accounts. Contact phone will be used for emergencies only. URL of organization is optional and will be used for better understanding of the background of the allocator.</p>"},{"location":"service-providers/#lumi-use-case","title":"LUMI Use-case","text":"<p>TODO: Add interactions between components.</p> <p></p>"},{"location":"terminology/","title":"Terminology","text":""},{"location":"terminology/#puhuri-terminology","title":"Puhuri Terminology","text":"Puhuri Term Puhuri Core API Term Puhuri AAI Term Definition AAI - - Authentication and Authorisation Infrastructure (AAI) (also used alternative term IAM). A set of various services to register a user to get a Puhuri ID, authenticate (i.e. to get the user identity) to use the integrated Resources (services), and provide means for the resources provider to grant access to the eligible users. Accepted Terms of Service - - A boolean value indicating if the Person has accepted the terms of service for a given resource Access - - A boolean value indicating if a User Account or Service Account has the right to use a resource. This includes that the user has accepted the Terms of Use. Accounting - - A set consisting of the aggregation of the allocation of resource components to a project, and the actual consumption of consumable units of allocated resource components within a project AccountRequest - - The process or action of requesting an account Allocating Body Customer (organization) - The entity that decides on the allocation of the resources to projects. There are multiple allocating bodies but at least one per participating country. Allocating Body Member - - A person or persons able to create projects and allocate resources according to the respective allocating bodies decisions. Allocation Resource - The right to access a resource and use of a resource component from a start date to an end date and to an extent of a number of consumable units as defined in a project API - - Application Programming Interface. An interface for machine-to-machine data transfer. Authentication - - Process to get information regarding who the user is. Call - - A Call represents a possibility to apply for a project on a certain resource(s). Different sets of resources with total available consumable units, min/max for requested allocation are available in different calls. Call-objects only live in the portal parts of Puhuri, or outside of Puhuri if the national stakeholders have their process set up in that way. Consumable Unit Resource limits - Consumable units that can be allocated to projects. These units are resource specific. Different resources and resource components may consume these at different rates. Consumable units and their rate of consumption are defined for all resources that have accountable resources. Default quota - - The default allotment of a limited asset. Default quotas are the same for everybody, and can be enforced per user or per user project. They should be documented to end users if relevant. If the requested amount of resources in a Project proposal exceeds the default quota, or if an active project needs an increased allotment, it is up to the resource owner to set a policy for how this is handled. See also Extended quota DiskQuota - - Disk is a consumable unit, the DiskQuota is the upper limit(s) to use of the amount(s) of disk available GDPR - - The General Data Protection Regulation is a regulation in EU law on data protection and privacy in the European Union and the European Economic Area. Lifespan - - The time period over which a project has an allocation on one or more resources. The Lifespan has a start date and an end date Member - User A member is a person who has the right to consume the consumable units allocated to a project. The person is then a member of that project National Portal - Client A National Portal is an existing portal that can communicate with Puhuri Core through an API and by which researchers can apply for the use of, and be given access to, a resource. If present it is to be used instead of the Puhuri portal National Project - - An object with one or more allocations on one or more resources. The project has a number of consumable units assigned for each of the allocations. It is assigned to a PI, has one or more optional proxy-PI and one or more members. The project is time limited by the lifespan. The Project has the PI, resource(s), the allocation(s), and the member(s) assigned. Here information of National character which is not necessarily represented in Project Organization - - A standalone entity that represents a company or a department Principal Investigator - - A principal investigator (PI) is a person responsible for, and manager of, a Project Project - - A project is an object with one or more allocations of on one or more resources. The project has a number of consumable units assigned for each of the allocations. It is assigned to a PI, has one or more optional proxy-PI and one or more members. The project is time limited by the lifespan. Project Proposal - - Project proposal linked to a Call is subject to evaluation (review). It is created by a Project\u2019s PI. Puhuri AAI - - A system for user registration and issuing Puhuri Account and AAI proxy for connecting IdPs and services Puhuri Account - - A representation of a unique real person with a unique identifier within Puhuri Core. Containing the contact information and institutional details for the person. A person can have multiple Resource Accounts Puhuri Core - Client of Researcher Access The central database that keeps track of the components of the Puhuri Services, with information on for example: resources, projects, Puhuri accounts, usage etc Puhuri Portal - Client of Puhuri AAI The portal to be used in absence of a National Portal with at least the same functionality as a National Portal Puhuri Services - - The aggregation of Puhuri Core, Puhuri AAI, Puhuri Portal, and corresponding APIs Service Provider - - An organization providing resources for other customers. Quota - - A quota is an allotment of a limited set of assets. Comment: The term \"Quota\" is only to be used in an abstract sense, whereas the more specific terms for different quotas are to be used in the architecture work Reporting - - The process by which the utilisation of allocated resource components in terms of consumable units within a project by members of the project is presented to stakeholders. Resource Offering - A Resource object represents a compute cluster, storage system, or cloud resource. Resource Account - - A Resource Account object represent the possibility for a Puhuri Account to access a Resource with a unique identifier (username or similar) Resource Component Offering Component - An allocatable part of a resource with a type and a unit Role - - Role information to be used for example when making decisions in Puhuri Core or Resources Service Account - - syn. Robot Account - A User Account which is not representing a real person, but a machine. However, it must have associated contact information to responsible persons. User ID - - A user is the entity (a real person or a machine) that uses the Resource. A User can belong to zero, one, or more Projects."},{"location":"API%20guide/authentication/","title":"Authentication","text":"<p>Puhuri Core exposes REST API for all of its operations. Below are examples of typical operations performed against APIs. To run the examples, we are using a HTTPie.</p> <p>Almost all of the operations with API require an authentication token. Below we list two methods on how to get it.</p>"},{"location":"API%20guide/authentication/#authentication-with-usernamepassword","title":"Authentication with username/password","text":"<p>If your account is allowed to use username/password and the method is enabled (e.g. in dev environment), you can get a new token by submitting a username/password as JSON to a specific endpoint.</p> <pre><code>$ http -v POST https://puhuri-core-beta.neic.no/api-auth/password/ username=admin password=puhuridemoadmin\nPOST /api-auth/password/ HTTP/1.1\nUser-Agent: HTTPie/2.4.0\nAccept-Encoding: gzip, deflate\nAccept: application/json, */*;q=0.5\nConnection: keep-alive\nContent-Type: application/json\nContent-Length: 52\nHost: puhuri-core-beta.neic.no\n\n{\"username\": \"admin\", \"password\": \"puhuridemoadmin\"}\n\nHTTP/1.1 200 OK\nDate: Fri, 09 Apr 2021 09:28:41 GMT\nContent-Type: application/json\nContent-Length: 52\nAllow: POST, OPTIONS\nX-Frame-Options: SAMEORIGIN\nVary: Accept-Language, Cookie\nContent-Language: en\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nStrict-Transport-Security: max-age=31536000; preload\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 1; mode=block\nReferrer-Policy: no-referrer-when-downgrade\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\n\n{\"token\":\"787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\"}\n</code></pre>"},{"location":"API%20guide/authentication/#authentication-token-management","title":"Authentication Token management","text":"<p>You are also able to get token from the Puhuri Core web interface. Go to user workspace by selecting 'Manage' in the user drop-down.</p> <p></p> <p>Scroll down to the Current API token field and click on the 'eye' icon to display the token.</p> <p></p>"},{"location":"API%20guide/common/","title":"Common","text":"<p>Generic API usage</p>"},{"location":"API%20guide/common/#pagination","title":"Pagination","text":"<p>All responses from Puhuri Core / Portal APIs are paginated. By default, 10 responses are returned. You can request more by passing <code>page_size=XXX</code> as query attribute. XXX can go up to 200.</p> <p>Pagination information is provided in Link headers.</p> <p>Check example of getting the full listing.</p>"},{"location":"API%20guide/common/#field-selection","title":"Field selection","text":"<p>In order to get a specific field from the response, you can use <code>field=field_name</code> selector in the query parameters.</p>"},{"location":"API%20guide/project-permissions/","title":"Project permissions","text":""},{"location":"API%20guide/project-permissions/#getting-a-mapping-of-aai-user-to-core-user","title":"Getting a mapping of AAI user to Core user","text":"<p>To get Puhuri Core User UUID mapping from Puhuri AAI CUID, service providers should pass CUID as a parameter to the endpoint below.</p> <pre><code>http POST https://puhuri-core-beta.neic.no/api/remote-eduteams/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\" cuid=\"01cfb7d6b76d400d12b8c8e0e33e36c5ef4562c1@acc.researcher-access.org\"\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: POST, OPTIONS\nContent-Language: en\nContent-Length: 43\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 14 Apr 2021 09:32:37 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"uuid\": \"bc9db26ff9984f8fa972fc071bfd008e\"\n}\n</code></pre> <p>Example of error message if user information could not have been retrieved.</p> <pre><code>http POST https://puhuri-core-beta.neic.no/api/remote-eduteams/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\" cuid=\"asdasd\"\nHTTP/1.1 401 Unauthorized\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: POST, OPTIONS\nContent-Language: en\nContent-Length: 53\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 14 Apr 2021 09:31:40 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"detail\": \"Eduteams error: Unable to get user info.\"\n}\n</code></pre> <p>The calls to the mapping endpoint are only allowed to users with identity manager role!</p> <pre><code>$ http POST https://puhuri-core-beta.neic.no/api/remote-eduteams/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\"\nHTTP/1.1 403 Forbidden\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: POST, OPTIONS\nContent-Language: en\nContent-Length: 56\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 14 Apr 2021 09:28:05 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n\"Only identity manager is allowed to sync remote users.\"\n</code></pre>"},{"location":"API%20guide/project-permissions/#project-members-permissions-allocation","title":"Project members permissions allocation","text":"<p>User create a role for a user in a project.</p> <pre><code>$ http --pretty=format -v POST https://puhuri-core-beta.neic.no/api/project-permissions/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\" role=member project=https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/ user=https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\nPOST /api/project-permissions/ HTTP/1.1\nAccept: application/json, */*;q=0.5\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nContent-Length: 200\nContent-Type: application/json\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n{\n\"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"role\": \"member\",\n    \"user\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\"\n}\n\nHTTP/1.1 201 Created\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 721\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 10:37:47 GMT\nLocation: https://puhuri-core-beta.neic.no/api/project-permissions/10/\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"created\": \"2021-04-09T10:37:47.246607Z\",\n    \"created_by\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n    \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n    \"expiration_time\": null,\n    \"pk\": 10,\n    \"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"project_name\": \"New project name\",\n    \"project_uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\",\n    \"role\": \"member\",\n    \"url\": \"https://puhuri-core-beta.neic.no/api/project-permissions/10/\",\n    \"user\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n    \"user_email\": \"admin@example.com\",\n    \"user_full_name\": \"Demo Staff\",\n    \"user_native_name\": \"\",\n    \"user_username\": \"admin\",\n    \"user_uuid\": \"3f2cadfbb2b145fd8cf18d549dcd7329\"\n}\n</code></pre>"},{"location":"API%20guide/project-permissions/#list-project-permissions","title":"List project permissions","text":"<pre><code>$ http --pretty=format -v https://puhuri-core-beta.neic.no/api/project-permissions/ project==4475ac77fa3a491aacb3fb3a6dfadadf Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\"\nGET /api/project-permissions/?project=4475ac77fa3a491aacb3fb3a6dfadadf HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 723\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 10:37:47 GMT\nLink: &lt;https://puhuri-core-beta.neic.no/api/project-permissions/?project=4475ac77fa3a491aacb3fb3a6dfadadf&gt;; rel=\"first\", &lt;https://puhuri-core-beta.neic.no/api/project-permissions/?project=4475ac77fa3a491aacb3fb3a6dfadadf&gt;; rel=\"last\"\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Result-Count: 1\nX-XSS-Protection: 1; mode=block\n\n[\n{\n\"created\": \"2021-04-09T10:37:47.246607Z\",\n        \"created_by\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n        \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n        \"expiration_time\": null,\n        \"pk\": 10,\n        \"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n        \"project_name\": \"New project name\",\n        \"project_uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\",\n        \"role\": \"member\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/project-permissions/10/\",\n        \"user\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n        \"user_email\": \"admin@example.com\",\n        \"user_full_name\": \"Demo Staff\",\n        \"user_native_name\": \"\",\n        \"user_username\": \"admin\",\n        \"user_uuid\": \"3f2cadfbb2b145fd8cf18d549dcd7329\"\n}\n]\n</code></pre>"},{"location":"API%20guide/project-permissions/#removal-of-members-from-a-project","title":"Removal of members from a project","text":"<p>User can remove the permissions calling DELETE verb on permission's URL.</p> <pre><code>$ http --pretty=format -v DELETE https://puhuri-core-beta.neic.no/api/project-permissions/10/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\"\nDELETE /api/project-permissions/10/ HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nContent-Length: 0\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 204 No Content\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 0\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nDate: Fri, 09 Apr 2021 10:38:37 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n</code></pre>"},{"location":"API%20guide/project/","title":"Project","text":""},{"location":"API%20guide/project/#lookup-allocator-customers-available-to-a-user","title":"Lookup allocator customers available to a user","text":"<p>In most cases integration user can see only one allocating organization (or Puhuri Core \"customer\"), however it is possible that the same account is used for allocating different shares, e.g. national share and community specific. Projects are always created in the context of a specific customer, so as a first thing you need to lookup a specific customer you want to use. Customer is a stable entity, so it's URL / UUID can be cached.</p> <pre><code>$ http --pretty=format -v https://puhuri-core-beta.neic.no/api/customers/ field==url field==name Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\"\nGET /api/customers/?field=url&amp;field=name HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 1188\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 09:28:42 GMT\nLink: &lt;https://puhuri-core-beta.neic.no/api/customers/?field=url&amp;field=name&gt;; rel=\"first\", &lt;https://puhuri-core-beta.neic.no/api/customers/?field=url&amp;field=name&gt;; rel=\"last\"\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Result-Count: 9\nX-XSS-Protection: 1; mode=block\n\n[\n{\n\"name\": \"Danish e-Infrastructure Cooperation\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\"\n},\n    {\n\"name\": \"Estonian Scientific Computing Infrastructure\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/33541d82c56c4eca8dbb1dabee54b3b9/\"\n},\n    {\n\"name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\"\n},\n    {\n\"name\": \"Swedish National Infrastructure for Computing\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/479843b7d15543bba6c0596bf408df63/\"\n},\n    {\n\"name\": \"Swiss National Supercomputing Centre\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/f7b91251f991485999f423529fcdc1ad/\"\n},\n    {\n\"name\": \"The IT4Innovations\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/9a8891e0327b460dbce61f9dda74d679/\"\n},\n    {\n\"name\": \"The Polish Grid Infrastructure\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/c11b0d4e95144bd5964a09a294d30196/\"\n},\n    {\n\"name\": \"UNINETT Sigma2 AS\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/918594bae69449bb8d011a4c5987515d/\"\n},\n    {\n\"name\": \"VLAAMS SUPERCOMPUTER CENTRUM\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/customers/b5fd863c7159484b8b9009aac1833cd3/\"\n}\n]\n</code></pre>"},{"location":"API%20guide/project/#create-a-new-project","title":"Create a new project","text":"<pre><code>$ http --pretty=format -v POST https://puhuri-core-beta.neic.no/api/projects/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\" customer=https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/ name=\"Project name\" description=\"Project description\" backend_id=\"My unique string\" oecd_fos_2007_code=\"1.1\"\nPOST /api/projects/ HTTP/1.1\nAccept: application/json, */*;q=0.5\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nContent-Length: 192\nContent-Type: application/json\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n{\n\"backend_id\": \"My unique string\",\n    \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\",\n    \"description\": \"Project description\",\n    \"name\": \"Project name\",\n    \"oecd_fos_2007_code\": \"1.1\"\n}\n\nHTTP/1.1 201 Created\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 604\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 09:40:52 GMT\nLocation: https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"backend_id\": \"My unique string\",\n    \"billing_price_estimate\": {\n\"current\": 0,\n        \"tax\": 0,\n        \"tax_current\": 0,\n        \"total\": 0.0\n    },\n    \"created\": \"2021-04-09T09:40:51.832870Z\",\n    \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\",\n    \"customer_abbreviation\": \"DeiC\",\n    \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n    \"customer_native_name\": \"\",\n    \"customer_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n    \"description\": \"Project description\",\n    \"name\": \"Project name\",\n    \"oecd_fos_2007_code\": \"1.1\",\n    \"type\": null,\n    \"url\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\"\n}\n</code></pre>"},{"location":"API%20guide/project/#update-an-existing-project","title":"Update an existing project","text":"<pre><code>$ http --pretty=format -v PUT https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\" name=\"New project name\" customer=https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\nPUT /api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/ HTTP/1.1\nAccept: application/json, */*;q=0.5\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nContent-Length: 124\nContent-Type: application/json\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n{\n\"customer\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\",\n    \"name\": \"New project name\"\n}\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 608\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 09:45:16 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"backend_id\": \"My unique string\",\n    \"billing_price_estimate\": {\n\"current\": 0,\n        \"tax\": 0,\n        \"tax_current\": 0,\n        \"total\": 0.0\n    },\n    \"created\": \"2021-04-09T09:40:51.832870Z\",\n    \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\",\n    \"customer_abbreviation\": \"DeiC\",\n    \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n    \"customer_native_name\": \"\",\n    \"customer_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n    \"description\": \"Project description\",\n    \"name\": \"New project name\",\n    \"type\": null,\n    \"url\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\"\n}\n</code></pre>"},{"location":"API%20guide/project/#list-projects","title":"List projects","text":"<pre><code>$ http --pretty=format -v https://puhuri-core-beta.neic.no/api/projects/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\"\nGET /api/projects/ HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 7129\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 09:46:41 GMT\nLink: &lt;https://puhuri-core-beta.neic.no/api/projects/&gt;; rel=\"first\", &lt;https://puhuri-core-beta.neic.no/api/projects/?page=2&gt;; rel=\"next\", &lt;https://puhuri-core-beta.neic.no/api/projects/?page=2&gt;; rel=\"last\"\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Result-Count: 20\nX-XSS-Protection: 1; mode=block\n\n[\n{\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-26T10:57:02.640605Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project description\",\n        \"name\": \"CSC test project\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/8cb53568cbed40c584029cb43cc540f6/\",\n        \"uuid\": \"8cb53568cbed40c584029cb43cc540f6\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:06:30.911124Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 10 description\",\n        \"name\": \"CSC test project 10\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/a6241bd8342c4fb4b8ea9507ea03d658/\",\n        \"uuid\": \"a6241bd8342c4fb4b8ea9507ea03d658\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:06:43.645113Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 11 description\",\n        \"name\": \"CSC test project 11\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/d21ccbb0033f49fa928dc6bcc739cd8e/\",\n        \"uuid\": \"d21ccbb0033f49fa928dc6bcc739cd8e\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:07:03.472114Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 12 description\",\n        \"name\": \"CSC test project 12\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/09119652d1f24a068ec8a6d29da1016a/\",\n        \"uuid\": \"09119652d1f24a068ec8a6d29da1016a\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:07:22.023662Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 13 description\",\n        \"name\": \"CSC test project 13\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/adf45385e57749c4b636d09b127039ea/\",\n        \"uuid\": \"adf45385e57749c4b636d09b127039ea\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:07:37.658803Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 14 description\",\n        \"name\": \"CSC test project 14\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/4b3ff8e4dfe84c8ab83834715c757e47/\",\n        \"uuid\": \"4b3ff8e4dfe84c8ab83834715c757e47\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T06:07:52.235226Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 15 description\",\n        \"name\": \"CSC test project 15\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/19cb4c0825ec4333adcdf3fce9382fac/\",\n        \"uuid\": \"19cb4c0825ec4333adcdf3fce9382fac\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T05:44:25.730256Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 2 description\",\n        \"name\": \"CSC test project 2\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/62808e67ca734d6c9710f7d1dd35a299/\",\n        \"uuid\": \"62808e67ca734d6c9710f7d1dd35a299\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T05:44:50.921959Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 3 description\",\n        \"name\": \"CSC test project 3\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/03a57d26bc5c448f96ccaf6e1ce2a91d/\",\n        \"uuid\": \"03a57d26bc5c448f96ccaf6e1ce2a91d\"\n},\n    {\n\"backend_id\": \"\",\n        \"billing_price_estimate\": {\n\"current\": 0,\n            \"tax\": 0,\n            \"tax_current\": 0,\n            \"total\": 0.0\n        },\n        \"created\": \"2021-03-30T05:45:07.739197Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/29f29e6b65004bff9e831dec7c953177/\",\n        \"customer_abbreviation\": \"CSC\",\n        \"customer_name\": \"IT CENTER FOR SCIENCE LTD\",\n        \"customer_native_name\": \"\",\n        \"customer_uuid\": \"29f29e6b65004bff9e831dec7c953177\",\n        \"description\": \"CSC test project 4 description\",\n        \"name\": \"CSC test project 4\",\n        \"type\": \"https://puhuri-core-beta.neic.no/api/project-types/c588e4bc82fa4cf0b97e545e117c4c21/\",\n        \"type_name\": \"Name of project type\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/projects/ed75f213306740588854ea3e973c7fb5/\",\n        \"uuid\": \"ed75f213306740588854ea3e973c7fb5\"\n}\n]\n</code></pre>"},{"location":"API%20guide/resource-allocation-management/","title":"Resource allocation management","text":""},{"location":"API%20guide/resource-allocation-management/#getting-a-list-of-offerings","title":"Getting a list of offerings","text":"<p>User can fetch offerings and filter them by the following fields:</p> <ul> <li><code>name</code> - offering's name</li> <li><code>name_exact</code> - offering's exact name</li> <li><code>customer</code> - organization's URL</li> <li><code>customer_uuid</code> - organization's UUID</li> <li><code>allowed_customer_uuid</code> - allowed organization's UUID</li> <li><code>service_manager_uuid</code> - service manager's UUID</li> <li><code>attributes</code> - a set of attributes (key-value pairs)</li> <li><code>state</code> - offering's state (<code>Active</code>, <code>Draft</code>, <code>Paused</code>, <code>Archived</code>), should be <code>Active</code></li> <li><code>category_uuid</code> - category's UUID</li> <li><code>billable</code> - signalizing if an offering is billable or not, should be <code>true</code></li> <li><code>shared</code> - signalizing if an offering is public or not, should be <code>true</code></li> <li><code>type</code> - offering's type</li> </ul> <pre><code>$ http --pretty=format -v https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\" state==Active shared==true\nGET /api/marketplace-public-offerings/?state=Active&amp;shared=true HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 4779\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 12:49:06 GMT\nLink: &lt;https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/?shared=true&amp;state=Active&gt;; rel=\"first\", &lt;https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/?shared=true&amp;state=Active&gt;; rel=\"last\"\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Result-Count: 1\nX-XSS-Protection: 1; mode=block\n\n[\n{\n\"attributes\": {},\n        \"backend_id\": \"\",\n        \"billable\": true,\n        \"category\": \"https://puhuri-core-beta.neic.no/api/marketplace-categories/5b61d0811cfe4ed6a004119795a4c532/\",\n        \"category_title\": \"HPC\",\n        \"category_uuid\": \"5b61d0811cfe4ed6a004119795a4c532\",\n        \"citation_count\": -1,\n        \"components\": [\n{\n\"article_code\": \"\",\n                \"billing_type\": \"usage\",\n                \"default_limit\": null,\n                \"description\": \"\",\n                \"disable_quotas\": false,\n                \"factor\": null,\n                \"is_boolean\": false,\n                \"limit_amount\": null,\n                \"limit_period\": null,\n                \"max_value\": null,\n                \"measured_unit\": \"CPU kH\",\n                \"min_value\": null,\n                \"name\": \"CPU allocation\",\n                \"type\": \"cpu_k_hours\",\n                \"use_limit_for_billing\": false\n},\n            {\n\"article_code\": \"\",\n                \"billing_type\": \"usage\",\n                \"default_limit\": null,\n                \"description\": \"\",\n                \"disable_quotas\": false,\n                \"factor\": null,\n                \"is_boolean\": false,\n                \"limit_amount\": null,\n                \"limit_period\": null,\n                \"max_value\": null,\n                \"measured_unit\": \"CPU kH\",\n                \"min_value\": null,\n                \"name\": \"GPU allocation\",\n                \"type\": \"gpu_k_hours\",\n                \"use_limit_for_billing\": false\n},\n            {\n\"article_code\": \"\",\n                \"billing_type\": \"usage\",\n                \"default_limit\": null,\n                \"description\": \"\",\n                \"disable_quotas\": false,\n                \"factor\": null,\n                \"is_boolean\": false,\n                \"limit_amount\": null,\n                \"limit_period\": null,\n                \"max_value\": null,\n                \"measured_unit\": \"GB kH\",\n                \"min_value\": null,\n                \"name\": \"Storage allocation\",\n                \"type\": \"gb_k_hours\",\n                \"use_limit_for_billing\": false\n}\n],\n        \"created\": \"2021-03-09T10:27:47.170024Z\",\n        \"customer\": \"https://puhuri-core-beta.neic.no/api/customers/d42a18b6b8ba4c2bb0591b3ff8fb181d/\",\n        \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n        \"customer_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n        \"datacite_doi\": \"\",\n        \"description\": \"LUMI share of Denmark\",\n        \"files\": [],\n        \"full_description\": \"&lt;h2&gt;Overview&lt;/h2&gt;One of the most powerful supercomputers in the world, LUMI, will start its operations in CSC\u2019s data center in Kajaani, Finland, next year. The peak performance of LUMI is an astonishing 552 petaflop/s. To date, the world\u2019s fastest computer, Fugaku in Japan, reaches peak performance of 513 petaflop/s. When LUMI\u2019s operations start next year, it will be one of the world\u2019s fastest supercomputers\",\n        \"google_calendar_is_public\": null,\n        \"latitude\": 64.2310486,\n        \"longitude\": 27.7040942,\n        \"name\": \"LUMI Denmark\",\n        \"native_description\": \"\",\n        \"native_name\": \"\",\n        \"options\": {},\n        \"order_item_count\": 1.0,\n        \"paused_reason\": \"\",\n        \"plans\": [\n{\n\"archived\": false,\n                \"article_code\": \"\",\n                \"description\": \"Default plan for all LUMI\",\n                \"init_price\": 0,\n                \"is_active\": true,\n                \"max_amount\": null,\n                \"name\": \"LUMI Common\",\n                \"prices\": {\n\"cpu_k_hours\": 0.1,\n                    \"gb_k_hours\": 0.001,\n                    \"gpu_k_hours\": 0.5\n                },\n                \"quotas\": {\n\"cpu_k_hours\": 0,\n                    \"gb_k_hours\": 0,\n                    \"gpu_k_hours\": 0\n},\n                \"switch_price\": 0,\n                \"unit\": \"month\",\n                \"unit_price\": \"0.0000000\",\n                \"url\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/c0fb33c79e9b48f69fcb6da26db5a28b/\",\n                \"uuid\": \"c0fb33c79e9b48f69fcb6da26db5a28b\"\n}\n],\n        \"plugin_options\": {\n\"auto_approve_in_service_provider_projects\": true\n},\n        \"quotas\": null,\n        \"rating\": 5,\n        \"scope\": null,\n        \"screenshots\": [],\n        \"secret_options\": {},\n        \"shared\": true,\n        \"state\": \"Active\",\n        \"terms_of_service\": \"\",\n        \"thumbnail\": null,\n        \"type\": \"Marketplace.Basic\",\n        \"url\": \"https://puhuri-core-beta.neic.no/api/marketplace-provider-offerings/073a0ddd6eba4ff4a90b943ae3e1b7c9/\",\n        \"uuid\": \"073a0ddd6eba4ff4a90b943ae3e1b7c9\",\n        \"vendor_details\": \"\"\n}\n]\n</code></pre>"},{"location":"API%20guide/resource-allocation-management/#creation-of-a-resource-allocation","title":"Creation of a resource allocation","text":"<p>User can create an order item including requested allocation parameters.</p> <ul> <li><code>project</code> - project's UUID</li> <li><code>items</code> - list of required allocations including:<ul> <li><code>offering</code> - respectful offering's URL</li> <li><code>attributes</code> - specific attributes for the offering</li> <li><code>plan</code> - plan's URL (if offering is billable)</li> <li><code>limits</code> - a set of resource limits for an allocation</li> </ul> </li> </ul> <pre><code>$ http --pretty=format -v POST https://puhuri-core-beta.neic.no/api/marketplace-orders/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\" &lt;&lt;&lt; '{\n    \"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"items\": [\n        {\n            \"offering\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/073a0ddd6eba4ff4a90b943ae3e1b7c9/\",\n            \"attributes\": {\n                \"name\": \"Resource allocation1\"\n            },\n            \"plan\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/c0fb33c79e9b48f69fcb6da26db5a28b/\",\n            \"limits\": {\n                \"gb_k_hours\": 1,\n                \"gpu_k_hours\": 2,\n                \"cpu_k_hours\": 3\n            }\n        }\n    ]\n}'\n\nPOST /api/marketplace-orders/ HTTP/1.1\nAccept: application/json, */*;q=0.5\nAccept-Encoding: gzip, deflate\nAuthorization: Token 32e7682378fa394b0f8b2538c444b60129ebfb47\nConnection: keep-alive\nContent-Length: 730\nContent-Type: application/json\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n{\n\"items\": [\n{\n\"attributes\": {\n\"name\": \"Resource allocation1\",\n            },\n            \"limits\": {\n\"cpu_k_hours\": 3,\n                \"gb_k_hours\": 1,\n                \"gpu_k_hours\": 2\n},\n            \"offering\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/073a0ddd6eba4ff4a90b943ae3e1b7c9/\",\n            \"plan\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/c0fb33c79e9b48f69fcb6da26db5a28b/\"\n}\n],\n    \"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\"\n}\n\nHTTP/1.1 201 Created\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 2114\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 21 Apr 2021 16:03:08 GMT\nLocation: https://puhuri-core-beta.neic.no/api/marketplace-orders/d4ba1c23c3de47d6b0ad61bbfbaeed05/\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"approved_at\": \"2021-04-21T16:03:08.430238Z\",\n    \"approved_by\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n    \"approved_by_full_name\": \"Demo Staff\",\n    \"approved_by_username\": \"admin\",\n    \"created\": \"2021-04-21T16:03:08.389589Z\",\n    \"created_by\": \"https://puhuri-core-beta.neic.no/api/users/3f2cadfbb2b145fd8cf18d549dcd7329/\",\n    \"created_by_full_name\": \"Demo Staff\",\n    \"created_by_username\": \"admin\",\n    \"customer_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n    \"file\": \"https://puhuri-core-beta.neic.no/api/marketplace-orders/d4ba1c23c3de47d6b0ad61bbfbaeed05/pdf/\",\n    \"items\": [\n{\n\"attributes\": {\n\"name\": \"Resource allocation1\",\n            },\n            \"category_title\": \"HPC\",\n            \"category_uuid\": \"5b61d0811cfe4ed6a004119795a4c532\",\n            \"cost\": \"1.3010000000\",\n            \"created\": \"2021-04-21T16:03:08.402139Z\",\n            \"error_message\": \"\",\n            \"error_traceback\": \"\",\n            \"limits\": {\n\"cpu_k_hours\": 3,\n                \"gb_k_hours\": 1,\n                \"gpu_k_hours\": 2\n},\n            \"modified\": \"2021-04-21T16:03:08.402139Z\",\n            \"offering\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/073a0ddd6eba4ff4a90b943ae3e1b7c9/\",\n            \"offering_billable\": true,\n            \"offering_description\": \"LUMI share of Denmark\",\n            \"offering_name\": \"LUMI Denmark\",\n            \"offering_shared\": true,\n            \"offering_terms_of_service\": \"\",\n            \"offering_thumbnail\": null,\n            \"offering_type\": \"Marketplace.Basic\",\n            \"offering_uuid\": \"073a0ddd6eba4ff4a90b943ae3e1b7c9\",\n            \"output\": \"\",\n            \"plan\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/c0fb33c79e9b48f69fcb6da26db5a28b/\",\n            \"plan_description\": \"Default plan for all LUMI\",\n            \"plan_name\": \"LUMI Common\",\n            \"plan_unit\": \"month\",\n            \"plan_uuid\": \"c0fb33c79e9b48f69fcb6da26db5a28b\",\n            \"provider_name\": \"Danish e-Infrastructure Cooperation\",\n            \"provider_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n            \"state\": \"pending\",\n            \"type\": \"Create\",\n            \"uuid\": \"f980c6ae5dc746c5bf5bbf1e31ff7d7e\"\n}\n],\n    \"project\": \"https://puhuri-core-beta.neic.no/api/projects/4475ac77fa3a491aacb3fb3a6dfadadf/\",\n    \"project_uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\",\n    \"state\": \"executing\",\n    \"total_cost\": \"1.3010000000\",\n    \"url\": \"https://puhuri-core-beta.neic.no/api/marketplace-orders/d4ba1c23c3de47d6b0ad61bbfbaeed05/\",\n    \"uuid\": \"d4ba1c23c3de47d6b0ad61bbfbaeed05\"\n}\n</code></pre> <p>If a token belongs to a staff user, the order can be approved automatically. Otherwise, there is additional need for manual approval.</p> <p>After that, order item should be pulled until resource UUID is present (<code>marketplace_resource_uuid</code> field).</p> <pre><code>$ http --pretty=format -v https://puhuri-core-beta.neic.no/api/marketplace-order-items/f980c6ae5dc746c5bf5bbf1e31ff7d7e/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\"\nGET /api/marketplace-order-items/f980c6ae5dc746c5bf5bbf1e31ff7d7e/ HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 32e7682378fa394b0f8b2538c444b60129ebfb47\nConnection: keep-alive\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 1948\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 21 Apr 2021 16:04:53 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"activation_price\": 0,\n    \"attributes\": {\n\"name\": \"Resource allocation1\",\n    },\n    \"can_terminate\": false,\n    \"category_title\": \"HPC\",\n    \"category_uuid\": \"5b61d0811cfe4ed6a004119795a4c532\",\n    \"cost\": \"1.3010000000\",\n    \"created\": \"2021-04-21T16:03:08.402139Z\",\n    \"created_by_civil_number\": null,\n    \"created_by_full_name\": \"Demo Staff\",\n    \"customer_name\": \"Danish e-Infrastructure Cooperation\",\n    \"customer_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n    \"error_message\": \"\",\n    \"error_traceback\": \"\",\n    \"fixed_price\": 0,\n    \"issue\": null,\n    \"limits\": {\n\"cpu_k_hours\": 3,\n        \"gb_k_hours\": 1,\n        \"gpu_k_hours\": 2\n},\n    \"marketplace_resource_uuid\": \"7b0dc0323ce94ebda8670d76a40ebe99\",\n    \"modified\": \"2021-04-21T16:03:08.542428Z\",\n    \"new_cost_estimate\": 1.301,\n    \"new_plan_name\": \"LUMI Common\",\n    \"new_plan_uuid\": \"c0fb33c79e9b48f69fcb6da26db5a28b\",\n    \"offering\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-offerings/073a0ddd6eba4ff4a90b943ae3e1b7c9/\",\n    \"offering_billable\": true,\n    \"offering_description\": \"LUMI share of Denmark\",\n    \"offering_name\": \"LUMI Denmark\",\n    \"offering_shared\": true,\n    \"offering_terms_of_service\": \"\",\n    \"offering_thumbnail\": null,\n    \"offering_type\": \"Marketplace.Basic\",\n    \"offering_uuid\": \"073a0ddd6eba4ff4a90b943ae3e1b7c9\",\n    \"old_cost_estimate\": 1.301,\n    \"order_approved_at\": \"2021-04-21T16:03:08.430238Z\",\n    \"order_approved_by\": \"Demo Staff\",\n    \"order_uuid\": \"d4ba1c23c3de47d6b0ad61bbfbaeed05\",\n    \"output\": \"\",\n    \"plan\": \"https://puhuri-core-beta.neic.no/api/marketplace-public-plans/c0fb33c79e9b48f69fcb6da26db5a28b/\",\n    \"plan_description\": \"Default plan for all LUMI\",\n    \"plan_name\": \"LUMI Common\",\n    \"plan_unit\": \"month\",\n    \"plan_uuid\": \"c0fb33c79e9b48f69fcb6da26db5a28b\",\n    \"project_name\": \"New project name\",\n    \"project_uuid\": \"4475ac77fa3a491aacb3fb3a6dfadadf\",\n    \"provider_name\": \"Danish e-Infrastructure Cooperation\",\n    \"provider_uuid\": \"d42a18b6b8ba4c2bb0591b3ff8fb181d\",\n    \"resource_name\": \"Resource allocation1\",\n    \"resource_type\": null,\n    \"resource_uuid\": null,\n    \"state\": \"done\",\n    \"type\": \"Create\",\n    \"uuid\": \"f980c6ae5dc746c5bf5bbf1e31ff7d7e\"\n}\n</code></pre>"},{"location":"API%20guide/resource-allocation-management/#todo-add-order-item-approval-example","title":"TODO: add order item approval example","text":""},{"location":"API%20guide/resource-allocation-management/#modification-of-a-resource-allocation","title":"Modification of a resource allocation","text":"<pre><code>$ http --pretty=format -v PUT https://puhuri-core-beta.neic.no/api/marketplace-resources/b97e82d0fc2445d493cf5659a3085608/ Authorization:\"Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\" name=\"New resource name\" description=\"New resource description\"\nPUT /api/marketplace-resources/b97e82d0fc2445d493cf5659a3085608/ HTTP/1.1\nAccept: application/json, */*;q=0.5\nAccept-Encoding: gzip, deflate\nAuthorization: Token 787de6b7c581ab6d9d42fe9ec12ac9f1811c5811\nConnection: keep-alive\nContent-Length: 72\nContent-Type: application/json\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n{\n\"description\": \"New resource description\",\n    \"name\": \"New resource name\"\n}\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 69\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Fri, 09 Apr 2021 15:21:23 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"description\": \"New resource description\",\n    \"name\": \"New resource name\"\n}\n</code></pre>"},{"location":"API%20guide/resource-allocation-management/#termination-of-a-resource-allocation","title":"Termination of a resource allocation","text":"<p>Termination uses a special short-cut action <code>/terminate</code> and returns UUID of a generated order.</p> <pre><code>$ http -v POST https://puhuri-core-beta.neic.no/api/marketplace-resources/8887243fa8d0458c970eeb6be28ff4f7/terminate/ Authorization:\"Token 32e7682378fa394b0f8b2538c444b60129ebfb47\"\nPOST /api/marketplace-resources/8887243fa8d0458c970eeb6be28ff4f7/terminate/ HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token 32e7682378fa394b0f8b2538c444b60129ebfb47\nConnection: keep-alive\nContent-Length: 0\nHost: puhuri-core-beta.neic.no\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: POST, OPTIONS\nContent-Language: en\nContent-Length: 49\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 14 Apr 2021 22:28:07 GMT\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n\"order_uuid\": \"7c73504611d741749b3a3a538979e74a\"\n}\n</code></pre>"},{"location":"SDK%20guide/allocation-management-ra/","title":"Allocation Lifecycle Management by Resource Allocator","text":""},{"location":"SDK%20guide/allocation-management-ra/#listing-associations-between-users-and-resources","title":"Listing associations between users and resources","text":"<p>To list the created associations between users and resources, the service provider should use <code>list_remote_offering_users</code> method. It receives an optional <code>filters</code> argument, a dictionary containing filters for the associations. The possible items are:</p> <ul> <li><code>user_uuid</code> - UUID of a user associated with resources belonging to SP</li> <li><code>offering</code> - SP resource URL</li> <li><code>offering_uuid</code> - UUID of a resource</li> <li><code>created</code> - date after what the association was created; the format is <code>YYYY-MM-DD</code>, e.g. <code>2022-01-30</code></li> <li><code>modified</code> - date after what the association was modified; the format is the same as for the <code>created</code> field</li> </ul> <p>In case if SDK usage is not possible, HTTP request can be sent:</p> <pre><code>GET &lt;API-URL&gt;/marketplace-offering-users/?user_uuid=&lt;USER_UUID&gt;&amp;offering_uuid=&lt;OFFERING_UUID&gt;&amp;created=2022-01-10&amp;modified=2022-01-30\n\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n{\n    \"created\": \"2022-01-19T19:40:10.328758Z\", # When the association has been created\n    \"modified\": \"2022-01-31T18:02:10.328758Z\", #\n    \"offering\": \"&lt;API-URL&gt;/marketplace-provider-offerings/&lt;OFFERING_UUID&gt;/\", # URL of the offering\n    \"offering_name\": \"Remote offering\", # Name of the offering\n    \"offering_uuid\": \"&lt;OFFERING_UUID&gt;\", # UUID of the offering\n    \"user\": \"http://localhost:8000/api/users/&lt;USER_UUID&gt;/\", # URL of the user\n    \"user_username\": \"&lt;USER_USERNAME&gt;\", # Username of the user\n    \"user_uuid\": \"&lt;USER_UUID&gt;\", # UUID of the user\n    \"username\": \"&lt;USERNAME&gt;\" # Username used in the association\n}\n</code></pre> <p>Example:</p> <pre><code>&gt; http -v --pretty all GET http://puhuri.example.com/api/marketplace-offering-users/ user_uuid==&lt;USER_UUID&gt; offering_uuid==&lt;OFFERING_UUID&gt; created==2021-08-17 Authorization:\"Token &lt;TOKEN&gt;\"\n\nGET /api/marketplace-offering-users/?user_uuid=&lt;USER_UUID&gt;&amp;offering_uuid=&lt;OFFERING_UUID&gt;&amp;created=2021-08-17 HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nAuthorization: Token abc\nConnection: keep-alive\nHost: api.etais.ee\nUser-Agent: HTTPie/2.4.0\n\n\n\nHTTP/1.1 200 OK\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Link, X-Result-Count\nAllow: GET, POST, HEAD, OPTIONS\nContent-Language: en\nContent-Length: 436\nContent-Security-Policy: report-uri csp.hpc.ut.ee; form-action 'self';\nContent-Type: application/json\nDate: Wed, 16 Feb 2022 12:03:49 GMT\nLink: &lt;http://puhuri.example.com/api/marketplace-offering-users/?created=2021-08-17&amp;offering_uuid=&lt;OFFERING_UUID&gt;&amp;user_uuid=&lt;USER_UUID&gt;&gt;; rel=\"first\", &lt;http://puhuri.example.com/api/marketplace-offering-users/?created=2021-08-17&amp;offering_uuid=&lt;OFFERING_UUID&gt;&amp;user_uuid=&lt;USER_UUID&gt;&gt;; rel=\"last\"\nReferrer-Policy: no-referrer-when-downgrade\nStrict-Transport-Security: max-age=31536000; preload\nVary: Accept-Language, Cookie\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-Result-Count: 1\nX-XSS-Protection: 1; mode=block\n\n[\n{\n\"created\": \"2021-08-18T10:33:21.433472Z\",\n        \"modified\": \"2022-02-04T19:35:19.382943Z\",\n        \"offering\": \"http://puhuri.example.com/api/marketplace-provider-offerings/&lt;OFFERING_UUID&gt;/\",\n        \"offering_name\": \"&lt;OFFERING_NAME&gt;\",\n        \"offering_uuid\": \"&lt;OFFERING_UUID&gt;\",\n        \"user\": \"http://puhuri.example.com/api/users/&lt;USER_UUID&gt;/\",\n        \"user_username\": \"&lt;USER_USERNAME&gt;\",\n        \"user_uuid\": \"&lt;USER_UUID&gt;\",\n        \"username\": \"&lt;USERNAME&gt;\"\n}\n]\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/","title":"Allocation Lifecycle Management by Service Provider","text":"<p>This page describes operations to be performed by service provider.</p>"},{"location":"SDK%20guide/allocation-management-sp/#prerequisites","title":"Prerequisites","text":"<p>Please, read initial setup for Puhuri Core SDK and please reach out to support email to get credentials for Puhuri Core.</p>"},{"location":"SDK%20guide/allocation-management-sp/#getting-a-list-of-users","title":"Getting a list of users","text":"<p><code>list_users</code> method is used to fetch all users in Puhuri Core.</p> <pre><code>result = client.list_users()\n\n# result =&gt;[\n# {'affiliations': [],\n#   'agreement_date': None,\n#   'civil_number': None,\n#   'competence': '',\n#   'customer_permissions': [],\n#   'date_joined': '2021-06-23T07:59:59.511681Z',\n#   'description': '',\n#   'email': 'arto.tuomi@csc.fi',\n#   'first_name': 'PUHURI',\n#   'full_name': 'PUHURI Test User 100',\n#   'is_active': True,\n#   'is_staff': False,\n#   'is_support': False,\n#   'job_title': '',\n#   'last_name': 'Test User 100',\n#   'native_name': '',\n#   'organization': '',\n#   'phone_number': '',\n#   'preferred_language': '',\n#   'project_permissions': [{'customer_name': 'IT CENTER FOR SCIENCE LTD',\n#                            'pk': 9,\n#                            'project_name': 'Project from CSC',\n#                            'project_uuid': 'c3be1c35f36448068cb57e278b788318',\n#                            'role': 'manager',\n#                            'url': 'https://puhuri-core-beta.neic.no/api/project-permissions/9/'}],\n#   'registration_method': 'eduteams',\n#   'requested_email': None,\n#   'url': 'https://puhuri-core-beta.neic.no/api/users/f8347a45f2f4409ea6be2034edc5e91b/',\n#   'username': '01cfb7d6b76d400d12b8c8e0e33e36c5ef4562c1@acc.researcher-access.org',\n#   'uuid': 'f8347a45f2f4409ea6be2034edc5e91b'}]\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#getting-a-list-of-ssh-keys","title":"Getting a list of SSH keys","text":"<p><code>list_ssh_keys</code> method is used to fetch all SSH keys in Puhuri Core.</p> <pre><code>result = client.list_ssh_keys()\n\n# result =&gt;\n[{'fingerprint': '...',\n  'is_shared': False,\n  'name': 'new key',\n  'public_key': '... '\n                '...'\n                '...',\n  'type': 'ssh-ed25519',\n  'url': '...',\n  'user_uuid': '31165878c7a04a4197f282924c1a2418',\n  'uuid': '8ae5c9bdbafd44c78250bc98c9783fad'},\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#getting-a-list-of-resource-allocations","title":"Getting a list of resource allocations","text":"<p><code>list_marketplace_resources</code> method is used to fetch resources related to offerings, which belong to user's service provider.</p> <p>Possible filter options for allocations (each one is optional):</p> <ul> <li><code>provider_uuid</code> - UUID of a service provider organization;</li> <li><code>state</code> - current state of a resource allocation; valid values: <code>Creating</code>, <code>OK</code>, <code>Erred</code>, <code>Updating</code>, <code>Terminating</code>, <code>Terminated</code>;</li> <li><code>offering_uuid</code> - UUID of a related resource;</li> <li><code>fields</code> - list of fields to return.</li> </ul> <pre><code>result = client.list_marketplace_resources(\n    provider_uuid='&lt;provider-uuid&gt;',\n    state='Creating',\n    offering_uuid='&lt;offering-uuid&gt;',\n    fields=['name', 'offering', 'state', 'limits', 'plan', 'project', 'url']\n)\n\n# result =&gt; {\n#   'limits': {'cpu_k_hours': 1000, 'gb_k_hours': 3000, 'gpu_k_hours': 1000},\n#   'name': 'Sample resource',\n#   'offering': 'https://puhuri-core-beta.neic.no/api/marketplace-provider-offerings/cf4eb9c29fc74af4ade667fcb53633d5/',\n#   'plan': 'https://puhuri-core-beta.neic.no/api/marketplace-public-plans/1537de6e94f9427cafb74cb63fa21c72/',\n#   'project': 'https://puhuri-core-beta.neic.no/api/projects/8a158ebf1abf4c74a431b9c65a0d7829/',\n#   'state': 'Creating',\n#   'url': 'https://puhuri-core-beta.neic.no/api/marketplace-resources/a1916bd53fd04b1ab1a4e700c926607b/'\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#approvingrejecting-order-items-for-allocations","title":"Approving/rejecting order items for allocations","text":"<p>A consumer can request allocation creation, update or termination using <code>OrderItem</code> entity. The service provider can either approve or reject it using <code>marketplace_order_item_approve</code> and <code>marketplace_order_item_reject</code> correspondingly. Both methods obtain <code>order_item_uuid</code> - UUID of an order item for the allocation. Only users with service provider owner and manager roles can perform these actions.</p> <p>For example, a consumer requested an allocation using <code>OrderItem</code> with <code>CREATE</code> type. After that, an empty allocation with <code>CREATING</code> state was appeared. A service provider can change the state to <code>OK</code> (created successfully) using <code>marketplace_order_item_approve</code> or <code>Terminated</code> (creation rejected) using <code>marketplace_order_item_reject</code>. In order to get a proper order item, SP owner can use <code>list_order_items</code> method. This action is for order item listing and supports filtering by state and allocation.</p> <pre><code>order_items = client.list_order_items(\n    {\n        'state': 'executing',\n        'marketplace_resource_uuid': '&lt;allocation-uuid&gt;'\n    }\n)\n\norder_item = order_items[0]\n\nresult = client.marketplace_order_item_approve(\n    order_item_uuid=order_item['uuid'],\n)\n\n# result =&gt; {\n#   'details': 'Order item has been approved.'\n#}\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#termination-cancellation-of-order-items-for-allocations","title":"Termination (cancellation) of order items for allocations","text":"<p>A consumer can also terminate (cancel) created order item and subsequently interrupt the requested operation over allocation. For example, this option is suitable if the customer wants to cancel allocation deletion. For this, <code>marketplace_order_item_terminate</code> method should be used. It changes the state of the order item to <code>terminated</code>. NB: this transition is possible only if the item's state is equal to <code>pending</code> or <code>executing</code>.</p> <pre><code>order_items = client.list_order_items(\n    {\n        'state': 'executing',\n        'marketplace_resource_uuid': '&lt;allocation-uuid&gt;',\n        'type': 'Terminate',\n    }\n)\n\norder_item = order_items[0]\n\nresult = client.marketplace_order_item_terminate(\n    order_item_uuid=order_item['uuid'],\n)\n\n# result =&gt; {\n#   'details': 'Order item termination has been scheduled.'\n#}\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#updating-resource-allocation-with-local-reference-setting-backend_id-field","title":"Updating resource allocation with local reference (setting <code>backend_id</code> field)","text":"<p>Each allocation can have a link to a service provider's internal reference using <code>backend_id</code> field. Only users with service provider owner and manager roles can set this value using <code>marketplace_resource_set_backend_id</code> method of the client. It requires the following arguments:</p> <ul> <li><code>resource_uuid</code> - UUID of a resource allocation;</li> <li><code>backend_id</code> - id of an external entity.</li> </ul> <pre><code>result = client.marketplace_resource_set_backend_id(\n    resource_uuid='&lt;resource-uuid&gt;',\n    backend_id='&lt;some-backend-id&gt;'\n)\n\n# result =&gt; {\n#   'status': 'Resource backend_id has been changed.'\n# }\n</code></pre> <p>In case if SDK usage is not possible, HTTP request can be sent:</p> <pre><code>POST &lt;API-URL&gt;/marketplace-resources/&lt;resource-uuid&gt;/\n\n{\n    \"backend_id\": \"&lt;some-backend-id&gt;\"\n}\n\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n{\n    \"status\": \"Resource backend_id has been changed.\"\n}\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#providing-additional-access-detail-for-resource-allocation","title":"Providing additional access detail for resource allocation","text":"<p>For additional details related to allocation access, <code>report</code> field is used. In order to provide this information, owners and managers can use <code>marketplace_resource_submit_report</code> method. It requires the following arguments:</p> <ul> <li><code>resource_uuid</code> - UUID of a resource allocation;</li> <li><code>report</code> - list of <code>ResourceReportRecord</code> instances.</li> </ul> <pre><code>from waldur_client import WaldurClient, ResourceReportRecord\n\nresult = client.marketplace_resource_submit_report(\n    resource_uuid='&lt;resource-uuid&gt;',\n    report=[\n        ResourceReportRecord(header='Header1', body='Body1'),\n        ResourceReportRecord(header='Header2', body='Body2')\n    ]\n)\n\n# result =&gt; {\n#   'status': 'Report is submitted'\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#getting-a-list-of-members-in-a-project-with-active-resource-allocations","title":"Getting a list of members in a project with active resource allocations","text":"<p>Service provider owners and managers can list project members using a resource allocation with <code>marketplace_resource_get_team</code> method. It requires the following arguments:</p> <ul> <li><code>resource_uuid</code> - UUID of a resource allocation.</li> </ul> <pre><code>result = client.marketplace_resource_get_team(\n    resource_uuid='&lt;resource-uuid&gt;'\n)\n\n# result =&gt; {\n# [\n#  {'email': 'CSC_api_user@example.com',\n#   'expiration_time': None,\n#   'full_name': 'Integration user (CSC)',\n#   'permission': 'https://puhuri-core-beta.neic.no/api/project-permissions/10/',\n#   'role': 'admin',\n#   'url': 'https://puhuri-core-beta.neic.no/api/users/bb235c67dcb44470a45d4e0f94e0ed00/',\n#   'username': 'CSC_api_user',\n#   'uuid': 'bb235c67dcb44470a45d4e0f94e0ed00'},\n#  {'email': 'ETAIS_api_user@example.com',\n#   'expiration_time': None,\n#   'full_name': 'Integration user (ETAIS)',\n#   'permission': 'https://puhuri-core-beta.neic.no/api/project-permissions/3/',\n#   'role': 'member',\n#   'url': 'https://puhuri-core-beta.neic.no/api/users/0cc72de4ebb840d98fef133e4433ec9a/',\n#   'username': 'ETAIS_api_user',\n#   'uuid': '0cc72de4ebb840d98fef133e4433ec9a'}]\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#reporting-usage-for-a-resource-allocation","title":"Reporting usage for a resource allocation","text":"<p>A usage of a resource allocation can be submitted by a corresponding service provider. For this, the following methods are used:</p> <ul> <li> <p><code>get_marketplace_offering</code> - getting offering with components info.   Arguments:</p> <ul> <li><code>offering_uuid</code> - UUID of an offering</li> </ul> </li> <li> <p><code>marketplace_resource_get_plan_periods</code> - getting current plan periods for resource allocation. Arguments:</p> <ul> <li><code>resource_uuid</code> - UUID of a resource</li> </ul> </li> <li> <p><code>create_component_usages</code> - creating or updating components usage for the current plan</p> <ul> <li><code>plan_period_uuid</code> - UUID of a plan period</li> <li><code>usages</code> - list of <code>ComponentUsage</code> instances</li> </ul> </li> </ul> <pre><code>from waldur_client import WaldurClient, ComponentUsage\n\noffering = client.get_marketplace_offering(offering_uuid='&lt;offering-uuid&gt;')\ncomponent_types = [component['type'] for component in offering['components']]\nplan_periods = client.marketplace_resource_get_plan_periods(resource_uuid='&lt;resource-uuid&gt;')\n\nif len(plan_periods) &gt; 0:\n    plan_period = plan_periods[0]\n\n    client.create_component_usages(\n        plan_period_uuid=plan_period['uuid'],\n        usages=[ComponentUsage(type=comp_type, amount=10, description='Usage') for comp_type in component_types]\n    )\n\nresult = client.marketplace_resource_get_plan_periods('&lt;resource-uuid&gt;')\n\n# result =&gt; {\n# [{'components': [{'created': '2021-08-11T15:36:45.562440Z',\n#                   'date': '2021-08-11T15:37:30.556830Z',\n#                   'description': 'Usage',\n#                   'measured_unit': 'units',\n#                   'name': 'CPU',\n#                   'type': 'cpu',\n#                   'usage': 10,\n#                   'uuid': '080066bebf9547d5ad3279f7c353b023'},\n#                  {'created': '2021-08-11T15:36:45.842385Z',\n#                   'date': '2021-08-11T15:37:30.556830Z',\n#                   'description': 'Usage',\n#                   'measured_unit': 'units',\n#                   'name': 'GPU',\n#                   'type': 'gpu',\n#                   'usage': 10,\n#                   'uuid': 'e8d745049bff4410b60f517e56daf421'}],\n#   'end': None,\n#   'plan_name': 'sample-plan',\n#   'plan_uuid': '9f7b1d113f464214bb195db38c217cf9',\n#   'start': '2021-08-11T15:20:25.762775Z',\n#   'uuid': 'fb36ce56e53b43e59b3d963354d0467c'}]\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#granting-user-access-to-resource","title":"Granting user access to resource","text":"<p>An access to a resource can be granted by service provider for a particular user with specification of username. A result is represented by triplet [user, resource, username]. For this purpose, <code>create_remote_offering_user</code> should be invoked. This method requires the following arguments:</p> <ul> <li><code>offering</code> - UUID or URL of a target offering;</li> <li><code>user</code> - UUID or URL of a target user;</li> <li><code>username</code> - username for the user.</li> </ul> <pre><code>result = client.create_remote_offering_user(\n    offering='&lt;offering-uuid-or-url&gt;',\n    user='&lt;user-uuid-or-url&gt;',\n    username='&lt;username&gt;'\n)\n\n# result =&gt; {\n#  'created': '2021-08-12T15:22:18.993586Z',\n#  'offering': 'http://localhost:8000/api/marketplace-provider-offerings/d47ca5bce71144579df29da3c290027e/',\n#  'offering_name': 'Remote offering (really)',\n#  'offering_uuid': 'd47ca5bce71144579df29da3c290027e',\n#  'user': 'http://localhost:8000/api/users/db157a5cf7f247eba161cd90eba9ac63/',\n#  'user_uuid': 'db157a5cf7f247eba161cd90eba9ac63',\n#  'username': 'abc'\n# }\n</code></pre> <p>In case if SDK usage is not possible, HTTP request can be sent:</p> <pre><code>POST &lt;API-URL&gt;/marketplace-offering-users/\n\n{\n    \"offering\": \"&lt;offering-uuid-or-url&gt;\",\n    \"user\": \"&lt;user-uuid-or-url&gt;\",\n    \"username\": \"&lt;username&gt;\"\n}\n\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\n{\n    \"created\": \"2021-08-12T15:22:18.993586Z\",\n    \"offering\": \"http://localhost:8000/api/marketplace-provider-offerings/d47ca5bce71144579df29da3c290027e/\",\n    \"offering_name\": \"Remote offering (really)\",\n    \"offering_uuid\": \"d47ca5bce71144579df29da3c290027e\",\n    \"user\": \"http://localhost:8000/api/users/db157a5cf7f247eba161cd90eba9ac63/\",\n    \"user_uuid\": \"db157a5cf7f247eba161cd90eba9ac63\",\n    \"username\": \"abc\"\n}\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#granting-user-access-to-corresponding-resources-in-batch-manner","title":"Granting user access to corresponding resources in batch manner","text":"<p>A service provider can grant access mentioned in the previous section to all resources used in projects including a target user. For such access creation or update, <code>set_offerings_username</code> is used. The method requires the following arguments:</p> <ul> <li>service_provider_uuid - UUID of a target service provider;</li> <li>user_uuid - UUID of a target user;</li> <li>username - the new username.</li> </ul> <pre><code>result = client.set_offerings_username(\n    service_provider_uuid='&lt;service-provider-uuid&gt;',\n    user_uuid='&lt;user-uuid&gt;',\n    username='&lt;username&gt;',\n)\n\n# result =&gt;  {\n#  'detail': 'Offering users have been set.'\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#getting-service-provider-for-an-organization","title":"Getting service provider for an organization","text":"<p>A user can get service provider details using <code>list_service_providers</code> with corresponding filter. This method is guaranteed to return a list with at most one service provider record.</p> <pre><code>service_providers = client.list_service_providers({'customer_uuid': '&lt;organization_uuid&gt;'})\nlumi_service_provider = service_providers[0]\n\n# lumi_service_provider =&gt; {\n#     'created': '2021-09-24T13:42:05.448269Z',\n#     'customer': 'https://puhuri-core-beta.neic.no/api/customers/ad3fec96141a41e2958a9836a5bc1dae/',\n#     'customer_abbreviation': 'LUMI',\n#     'customer_country': 'FI',\n#     'customer_image': None,\n#     'customer_name': 'Large Unified Modern Infrastructure',\n#     'customer_native_name': '',\n#     'customer_uuid': 'ad3fec96141a41e2958a9836a5bc1dae',\n#     'description': '',\n#     'division': None,\n#     'enable_notifications': False,\n#     'image': None,\n#     'url': 'https://puhuri-core-beta.neic.no/api/marketplace-service-providers/08904a1c2e704f208e5146bef93e3220/',\n#     'uuid': '08904a1c2e704f208e5146bef93e3220'\n# }\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#listing-users-of-service-providers-resources","title":"Listing users of service provider's resources","text":"<p>A service provider owner can list users currently using its resources. For this, <code>list_service_provider_users</code> should be used. It accepts service_provider_uuid, which can be fetched using list_service_providers.</p> <pre><code>service_providers = client.list_service_providers({'customer_uuid': '&lt;customer_uuid&gt;'})\nservice_provider = service_providers[0]\nservice_provider_uuid = service_provider['uuid']\n\nresult = client.list_service_provider_users(service_provider_uuid)\n\n# result =&gt; [\n#   ...\n#   {\n#       ...\n#       'first_name': 'John',\n#       'full_name': 'John Doe',\n#       'is_active': True,\n#       'is_staff': False,\n#       'is_support': False,\n#       'job_title': '...',\n#       'last_name': 'Doe',\n#       ...\n#   }\n#   ...\n# ]\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#listing-ssh-key-for-users-of-service-providers-resources","title":"Listing ssh key for users of service provider's resources","text":"<p>A service provider owner can list ssh keys of users currently using its resources. For this, <code>list_service_provider_ssh_keys</code> should be used. It accepts service_provider_uuid, which can be fetched using list_service_providers.</p> <pre><code>service_providers = client.list_service_providers({'customer_uuid': '&lt;customer_uuid&gt;'})\nservice_provider = service_providers[0]\nservice_provider_uuid = service_provider['uuid']\n\nresult = client.list_service_provider_ssh_keys(service_provider_uuid)\n\n# result =&gt; [\n#   ...\n#   {\n#        'fingerprint': '...',\n#        'is_shared': False,\n#        'name': 'key',\n#        'public_key': 'ssh-rsa ...',\n#        'type': 'ssh-rsa',\n#        'url': '&lt;key_url&gt;',\n#        'user_uuid': '&lt;user_uuid&gt;',\n#        'uuid': '&lt;key_uuid&gt;'\n#   }\n#   ...\n# ]\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#listing-projects-with-service-providers-resources","title":"Listing projects with service provider's resources","text":"<p>A service provider owner can list all projects, which have its resources. For this, <code>list_service_provider_projects</code> should be used. It accepts service_provider_uuid, which can be fetched using list_service_providers.</p> <pre><code>service_providers = client.list_service_providers({'customer_uuid': '&lt;customer_uuid&gt;'})\nservice_provider = service_providers[0]\nservice_provider_uuid = service_provider['uuid']\n\nresult = client.list_service_provider_projects(service_provider_uuid)\n\n# result =&gt; [\n#   ...\n#   {\n#       'backend_id': '',\n#       'billing_price_estimate': {...},\n#       'created': '...',\n#       'customer': '&lt;customer_url&gt;',\n#       'customer_abbreviation': '&lt;customer_abbreviation&gt;',\n#       'customer_name': '&lt;customer_name&gt;',\n#       'customer_native_name': '&lt;customer_native_name&gt;',\n#       'customer_uuid': '&lt;customer_uuid&gt;',\n#       'description': '&lt;customer_description&gt;',\n#       'end_date': '...',\n#       'name': '&lt;project_name&gt;',\n#       'oecd_fos_2007_code': '&lt;oecd_fos_2007_code&gt;',\n#       'type': '&lt;project_type&gt;',\n#       'url': '&lt;project_url&gt;',\n#       'uuid': '&lt;project_uuid&gt;'\n#   }\n#   ...\n# ]\n</code></pre>"},{"location":"SDK%20guide/allocation-management-sp/#listing-project-permissions-in-projects-using-service-providers-resources","title":"Listing project permissions in projects using service provider's resources","text":"<p>A service provider owner can also list all active projects permissions in projects, which have its resources. For this, <code>list_service_provider_project_permissions</code> should be used. It accepts service_provider_uuid, which can be fetched using list_service_providers.</p> <pre><code>service_providers = client.list_service_providers({'customer_uuid': '&lt;customer_uuid&gt;'})\nservice_provider = service_providers[0]\nservice_provider_uuid = service_provider['uuid']\n\nresult = client.list_service_provider_project_permissions(service_provider_uuid)\n\n# result =&gt; [\n#   ...\n#   {\n#       'created': '...',\n#       'created_by': '...',\n#       'customer_name': '&lt;customer_name&gt;',\n#       'expiration_time': '...',\n#       'pk': ...,\n#       'project': '&lt;project_url&gt;',\n#       'project_name': '&lt;project_name&gt;',\n#       'project_uuid': '&lt;project_uuid&gt;',\n#       'role': '...',\n#       'url': '&lt;permission_url&gt;',\n#       'user': '&lt;user_url&gt;',\n#       'user_email': '&lt;user_email&gt;',\n#       'user_full_name': 'John Doe',\n#       'user_native_name': 'John Doe',\n#       'user_username': 'john-doe',\n#       'user_uuid': '&lt;user_uuid&gt;'\n#   }\n#   ...\n# ]\n</code></pre>"},{"location":"SDK%20guide/initial-setup/","title":"Initial setup","text":""},{"location":"SDK%20guide/initial-setup/#installation","title":"Installation","text":"<p>Puhuri Core is based on Waldur, which exposes REST API. Puhuri Core SDK is a python wrapper for typical REST operations.</p> <p>It is packaged as a Python module and published in PyPI, so you can install it with standard tools like:</p> <pre><code>pip install git+https://github.com/waldur/python-waldur-client.git@master\n</code></pre> <p>In order to perform operations, a user needs to create an instance of <code>WaldurClient</code> class:</p> <pre><code>from waldur_client import WaldurClient\n\nclient = WaldurClient('&lt;api-url&gt;', '&lt;api-token&gt;')\n</code></pre> <p>This instance provides interface for further interaction with Puhuri Core and will be used across examples in related documentation.</p>"},{"location":"SDK%20guide/initial-setup/#error-handling","title":"Error handling","text":"<p>If the client fails to perform an operation, it raises <code>WaldurClientException</code>. This can be handles using <code>try...except</code> block. Example:</p> <pre><code>from waldur_client import WaldurClient, WaldurClientException\nimport pprint\n\nclient = WaldurClient('https://abc.example.com/api', 'some-token')\n\ntry:\n    client.list_marketplace_resources()\nexcept WaldurClientException as e:\n    pprint.pprint(e)\n\n# WaldurClientException(\"HTTPSConnectionPool(host='abc.example.com', port=443):\n# Max retries exceeded with url: /api/marketplace-resources/?page_size=200\n# (Caused by NewConnectionError('&lt;urllib3.connection.VerifiedHTTPSConnection object at 0x110636430&gt;:\n# Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))\")\n</code></pre>"},{"location":"documents/statistics_pp/","title":"Privacy Policy of the Puhuri statistics webpage","text":"<p>This privacy policy applies between you, the User of Puhuri statistics webpage on https://puhuri-stats.neic.no, hereinafter Website) and the University of Tartu, the owner and provider of this Website. This privacy policy applies to our use of any Data collected by us or provided by you in relation to your use of the Website. Please read this privacy policy carefully.</p> <p>We process personal data only if there is a legal basis for it and only as long as necessary to achieve the objective of processing or to comply with legal obligations. The processor applies all relevant organizational, physical and technical security measures to protect the personal data that are at the university\u2019s disposal from unauthorized and non-compliant use, disclosure or damage.</p> <ol> <li> <p>Definitions and interpretation</p> <ol> <li> <p>In this privacy policy, the following definitions are used:</p> <ol> <li>Data - collectively any information that we will collect and you submit to the University of Tartu via the Website. This definition incorporates, where applicable, the definitions provided in General Data Protection Regulation (GDPR);</li> <li>Cookies - a small text file placed on your computer by this Website when you visit certain parts of the Website and/or when you use certain features of the Website. Details of the cookies used by this Website are set out in the clause below (Cookies);</li> <li>the University of Tartu, we or us -  the University of Tartu,  \u00dclikooli 18, 50090 Tartu, Estonia;</li> <li>UK and EU Cookie Law - the Privacy and Electronic Communications (EC Directive) Regulations 2003 as amended by the Privacy and Electronic Communications (EC Directive) (Amendment) Regulations 2011;</li> <li>User or you - any third party that accesses the Website and is not either (i) employed by  the University of Tartu and acting in the course of their employment or (ii) engaged as a consultant or otherwise providing services to the University of Tartu and accessing the Website in connection with the provision of such services; </li> <li>Website - Puhuri statistics webpage (https://puhuri-stats.neic.no) and any sub-domains of this site unless expressly excluded by their own privacy policy.</li> <li>LUMI Consortium - LUMI is one of the EuroHPC pre-exascale supercomputers, which is hosted by the LUMI consortium. Consortium provides a high-quality, cost-efficient and environmentally sustainable HPC ecosystem based on true European collaboration.</li> </ol> </li> <li> <p>In this privacy policy, unless the context requires a different interpretation:</p> <ol> <li>the singular includes the plural and vice versa;</li> <li>references to sub-clauses, clauses, schedules or appendices are to sub-clauses, clauses, schedules or appendices of this privacy policy;</li> <li>a reference to a person includes firms, companies, government entities, trusts and partnerships;</li> <li>\"including\" is understood to mean \"including without limitation\";</li> <li>reference to any statutory provision includes any modification or amendment of it.</li> </ol> </li> </ol> </li> <li> <p>Scope of this privacy policy</p> <ol> <li>This privacy policy describes how we collect, use, share and retain your Data during and after your engagement or relationship with us.</li> <li>We are committed to ensuring that any Data we receive is protected and handled in accordance with applicable data protection laws.</li> <li>This privacy policy applies only to the actions of the University of Tartu and Users with respect to this Website. It does not extend to any websites that can be accessed from this Website including, but not limited to, any links we may provide to social media websites.</li> </ol> </li> <li> <p>Data collected</p> <ol> <li>We may collect the following Data, which includes personal Data, from you or your Home Organisation via MyAccessID:<ol> <li>Name and surname;</li> <li>Contact Information such as email addresses;</li> <li>Unique user identifier (MyAccessID CUID);</li> <li>IP address (automatically collected);</li> <li>Web browser type and version (automatically collected);</li> <li>Operating system (automatically collected);</li> <li>in each case, in accordance with this privacy policy.</li> </ol> </li> </ol> </li> <li> <p>Data sharing</p> <ol> <li>We do not sell, trade, or otherwise transfer to third parties your Data, unless we have prior written consent from you or we are required to do so under applicable law.</li> <li>This does not include LUMI Consortium who helps us provide you with the services.</li> </ol> </li> <li> <p>Links to other websites</p> <ol> <li>The data protection policy does not deal with the way the processor processes data of legal persons or how other persons process personal data. Nor does the policy cover the processing of personal data on external websites to which there are links on the portal\u2019s web pages.</li> </ol> </li> <li> <p>Changes in business ownership and control</p> <ol> <li>The University of Tartu may, from time to time, expand or reduce our business and this may involve the sale and/or the transfer of control of all or part of the University of Tartu. Data provided by Users will, where it is relevant to any part of our business so transferred, be transferred along with that part and the new owner or newly controlling party will, under the terms of this privacy policy, be permitted to use the Data for the purposes for which it was originally supplied to us.</li> <li>In the above instances, we will take steps with the aim of ensuring your privacy is protected and this privacy policy will be updated accordingly to reflect those changes.</li> </ol> </li> <li> <p>Your Rights</p> <ol> <li>You may not transfer any of your rights under this privacy policy to any other person. </li> <li>You have the right to receive a confirmation on whether or not we are processing your Personal Data.</li> <li>You have the right to withdraw your consent at any time if the personal Data is processed on the basis of data subject\u2019s consent. This does not affect the lawfulness of Data processing that occurred before the consent was withdrawn.</li> <li>You have the right to ask for a copy of any of your personal Data held by the University of Tartu (where such Data is held). The first copy is free of charge, the following copies may incur a small fee, which will not exceed 20 EUR.</li> <li>You have the right to request the erasure of your Data and if the processing of your Data is based on your consent, the right to withdraw your consent. If you request the erasure of your Data or withdraw your consent, we will delete the Data unless there are other legal grounds for the processing or unless we have a statutory obligation to store the Data. In any case, we will delete your Data after the retention period has ended.</li> <li>If you find out that the way we are processing your Data is against the law, you have the right to submit a claim to the national Data Protection Authority (DPA).</li> </ol> </li> <li> <p>Security</p> <ol> <li>Data security is of great importance to the University of Tartu and to protect your Data we have put in place suitable physical, electronic and managerial procedures to safeguard and secure Data collected via this Website.</li> <li>If password access is required for certain parts of the Website, you are responsible for keeping this password confidential.</li> <li>We endeavor to do our best to protect your Personal Data. However, the transmission of information over the internet is not entirely secure and is done at your own risk. We cannot ensure the security of your Data transmitted to the Website.</li> </ol> </li> <li> <p>Cookies</p> <ol> <li>You may restrict your internet browser's use of Cookies.</li> <li>This Website may place and access certain Cookies on your computer. The University of Tartu uses Cookies to improve your experience of using the Website and to improve our range of services. The University of Tartu has carefully chosen these Cookies and has taken steps to ensure that your privacy is protected and respected at all times.</li> <li>All Cookies used by this Website are used in accordance with current UK and EU Cookie Law.</li> <li>Before the Website places Cookies on your computer, you will be presented with a message bar requesting your consent to set those Cookies. By giving your consent to the placing of Cookies, you are enabling the University of Tartu to provide a better experience and service to you. You may, if you wish, deny consent to the placing of Cookies; however certain features of the Website may not function fully or as intended.</li> <li>This Website may place the following Cookies:<ol> <li>Strictly necessary cookies - These are cookies that are required for the operation of our Website. They include, for example, cookies that enable you to log into secure areas of our Website, use a shopping cart or make use of e-billing services.</li> <li>Analytical/performance cookies - They allow us to recognize and count the number of visitors and to see how visitors move around our Website when they are using it. This helps us to improve the way our Website works, for example, by ensuring that users are finding what they are looking for easily.</li> <li>Functionality cookies - These are used to recognize you when you return to our Website. This enables us to personalize our content for you, greet you by name and remember your preferences (for example, your choice of language or region).</li> </ol> </li> <li>You can choose to enable or disable Cookies in your internet browser. By default, most internet browsers accept Cookies but this can be changed. For further details, please consult the help menu in your internet browser.</li> <li>You can choose to delete Cookies at any time; however, you may lose any information that enables you to access the Website more quickly and efficiently including, but not limited to, personalization settings.</li> <li>It is recommended that you ensure that your internet browser is up-to-date and that you consult the help and guidance provided by the developer of your internet browser if you are unsure about adjusting your privacy settings.</li> </ol> </li> <li> <p>Data Protection Regulation</p> <ol> <li>Your personal data will be protected and processed according to European GDPR regulation 2016/679.</li> <li>Your personal data will be protected according to the Code of Conduct for Service Providers, a common standard for the research and higher education sector to protect your privacy.</li> </ol> </li> <li> <p>Changes to this privacy policy</p> <ol> <li>The University of Tartu reserves the right to change this privacy policy as we may deem necessary from time to time or as may be required by law. The most recent version of the privacy policy is posted on the Website and you are deemed to have accepted the terms of the privacy policy on your first use of the Website following the alterations.</li> <li>We encourage you to review this privacy policy often to stay informed of changes that may affect you.</li> </ol> </li> <li> <p>Contacting Us</p> <ul> <li>If you have any questions regarding this privacy policy or you would like to receive any stored Data we have about you, please contact us by email at support@hpc.ut.ee.</li> </ul> </li> </ol>"},{"location":"documents/statistics_tos/","title":"Terms of Use of the Puhuri statistics webpage","text":"<p>The University of Tartu reserves the right to change, add or remove portions of these Terms of Use, at any time. It is your responsibility to check these Terms of Use periodically for changes. The most recent version of the Terms of Use is posted on this website and you are deemed to have accepted the Terms of Use on your first use of the https://puhuri-stats.neic.no following the alterations.</p> <ol> <li> <p>Definitions and interpretation</p> <ol> <li> <p>In this Terms of Use, the following definitions are used:</p> <ol> <li>The University of Tartu, we or us or service - the University of Tartu, \u00dclikooli 18, 50090 Tartu, Estonia;</li> <li>https://puhuri-stats.neic.no \u2013 our webpage through which we offer our Service;</li> <li>Service \u2013 any or all of the services we offer and which the User can use through https://puhuri-stats.neic.no.</li> <li>User or you - any third party that accesses the https://puhuri-stats.neic.no and is not either (i) employed by the University of Tartu and acting in the course of their employment or (ii) engaged as a consultant or otherwise providing services to the University of Tartu and accessing the https://puhuri-stats.neic.no in connection with the provision of such services.</li> </ol> </li> <li> <p>In this Terms of Use, unless the context requires a different interpretation:</p> <ol> <li>the singular includes the plural and vice versa;</li> <li>references to sub-clauses, clauses, schedules or appendices are to sub-clauses, clauses, schedules or appendices of this Terms of Use;</li> <li>a reference to a person includes firms, companies, government entities, trusts and partnerships;</li> <li>\"including\" is understood to mean \"including without limitation\";</li> <li>reference to any statutory provision includes any modification or amendment of it.</li> </ol> </li> </ol> </li> <li> <p>Who can use Services?     The main purpose of the Service is to provide statistics of the used computational resources, which are allocated using Puhuri, to the national resource allocators.</p> </li> <li> <p>How to use Services?     To gain access to the Service you have to register yourself by creating an account in https://puhuri-stats.neic.no. For that, you must identify yourself with the MyAccessID (Access Management Service provided by GEANT) authentication system.     Private organizations who cannot identify themselves with MyAccessID please contact us at support@hpc.ut.ee</p> </li> <li> <p>Service providers\u2019 rights and responsibilities</p> <ol> <li>Users\u2019 personal data will be processed in accordance with the Privacy Policy.</li> <li>The service provider can restrict or suspend Users access to Services, for administrative, operational, or security reasons, without prior notice and without compensation.</li> <li>The service provider can restrict access of Users who have violated the Terms of Use.</li> <li>The service provider provides users with user guides (published on the website) and additional guidance (by email, phone, in-person) when needed.</li> </ol> </li> <li> <p>Users\u2019 rights and responsibilities</p> <ol> <li>Users must follow the Terms of Use, read and accept the Privacy Policy and follow all legal acts of Estonia and EU without exception when using Services.</li> <li>Users shall show consideration towards other users including by not causing harm to the Services.</li> <li>Users have an obligation to collaborate in the resolution of issues arising from your use of the Services.</li> <li>Users shall only use the Services for lawful purposes and not breach, attempt to breach, nor circumvent administrative or security controls.</li> <li>Users must keep their login data private (e.g. passwords, private keys). Sharing of login credentials is strictly forbidden and also accessing Services with someone else's login credentials is strictly forbidden.</li> <li>Users shall keep their registered information correct and up to date.</li> <li>Users shall promptly report known or suspected security breaches, credential compromises and report any compromised credentials to the University of Tartu staff.</li> <li>Users may not probe, scan or test the vulnerability of the Services.</li> <li>Users may not reverse look-up, trace or seek to trace any information on any other Users of the Services.</li> <li>Users are accountable for their actions and the consequences of those actions. Violations of Terms of Use, Privacy Policy, procedure, and security rules may result in applicable administrative sanctions or legal actions.</li> </ol> </li> </ol>"},{"location":"idp_integration/","title":"Integrating Identity Providers with Puhuri AAI","text":""},{"location":"idp_integration/#overview","title":"Overview","text":"<p>Puhuri AAI uses MyAccessID platform as an integration point for all IdPs. MyAccessID is published in eduGAIN as a Service Provider and will consume IdPs available in eduGAIN through the metadata exchange mechanism. MyAccessID can on request integrate IdPs in the case they are not available in eduGAIN.</p> <p></p>"},{"location":"idp_integration/#integration-of-idps","title":"Integration of IdPs","text":"<p>Depending on whether IdP is available in eduGAIN, following possibilities exist:</p> <ul> <li> <p>IdPs that are available in eduGAIN will be automatically integrated. Please refer to   Requirements for IdPs integrated through eduGAIN for further   specification on requirements. You can check if your IdP is registered at   https://release-check.edugain.org/.</p> </li> <li> <p>IdPs that are not available in eduGAIN will be integrated on a request basis. National   LUMI integration contacts should get in touch with Puhuri to request integration and exchange   the integration end points. Please refer to Requirements for directly integrated IdPs   for further specification on requirements.</p> </li> </ul>"},{"location":"idp_integration/#questions","title":"Questions?","text":"<p>Contact person for additional information: marina at sunet.se.</p>"},{"location":"idp_integration/#technical-details","title":"Technical details","text":"<ul> <li>Puhuri AAI - Production Environment</li> <li>Puhuri AAI - Acceptance Environment</li> <li>MyAccessID AAI - Production Environment</li> <li>MyAccessID AAI - Acceptance Environment</li> <li>GEANT Support</li> <li>Profile management at MyAccessID - Production Environment</li> <li>Profile management at MyAccessID - Acceptance Environment</li> <li>Demo SP for attribute release check</li> <li>Registration of a new client in Production</li> <li>Registration of a new client in Acceptance</li> </ul>"},{"location":"idp_integration/#puhuri-core-specifics","title":"Puhuri CORE specifics","text":"<ul> <li>A miniscript for getting refresh token. Replace client_id / client_secret with actual values.</li> </ul>"},{"location":"idp_integration/attributes/","title":"Attributes","text":"<p>Depending on which protocol the IdP is using, SAML or OIDC, attributes need to be released in the following format, respectively. </p>"},{"location":"idp_integration/attributes/#saml-attribute-names","title":"SAML Attribute Names","text":"<p>SAML Attributes MUST be sent using urn:oasis:names:tc:SAML:2.0:attrname-format:uri NameFormat. Below is the list of the canonical names of the SAML attributes:</p> <ul> <li>Subject ID<ul> <li>SAML attribute: urn:oasis:names:tc:SAML:attribute:subject-id</li> </ul> </li> <li>Pairwise ID<ul> <li>SAML attribute: urn:oasis:names:tc:SAML:attribute:pairwise-id</li> </ul> </li> <li>Community Identifier<ul> <li>SAML attribute: urn:oid:1.3.6.1.4.1.25178.4.1.6 (voPersonID)</li> </ul> </li> <li>Email<ul> <li>SAML attribute: urn:oid:0.9.2342.19200300.100.1.3 (email)</li> </ul> </li> <li>Common Name<ul> <li>SAML attribute: urn:oid:2.5.4.3</li> </ul> </li> <li>Display Name<ul> <li>SAML attribute:  urn:oid:2.16.840.1.113730.3.1.241 (displayName)</li> </ul> </li> <li>Given Name<ul> <li>SAML attribute: urn:oid:2.5.4.42 (givenName)</li> </ul> </li> <li>Family Name<ul> <li>SAML attribute: urn:oid:2.5.4.4 (surname)</li> </ul> </li> <li>Affiliation<ul> <li>SAML attribute: urn:oid:1.3.6.1.4.1.5923.1.1.1.9 (eduPersonScopedAffiliation)</li> <li>SAML attribute: urn:oid:1.3.6.1.4.1.25178.4.1.11 (voPersonExternalAffiliation)</li> </ul> </li> <li>Home Organization<ul> <li>SAML attribute: urn:oid:1.3.6.1.4.1.25178.1.2.9 (schacHomeOrganization)</li> </ul> </li> <li>Assurance<ul> <li>SAML attribute: urn:oid:1.3.6.1.4.1.5923.1.1.1.11 (eduPersonAssurance)</li> <li>Assurance attribute is mandatory from March 1st, 2023</li> <li>The following letter was sent to the federations:   Assurance letter</li> </ul> </li> </ul>"},{"location":"idp_integration/attributes/#oidc-claim-names","title":"OIDC Claim Names","text":"<ul> <li>Subject ID<ul> <li>OIDC claim: subject-id</li> </ul> </li> <li>Community Identifier<ul> <li>OIDC claim: voperson_id</li> </ul> </li> <li>Email<ul> <li>OIDC claim: email</li> </ul> </li> <li>Display Name<ul> <li>OIDC claim: name</li> </ul> </li> <li>Given Name<ul> <li>OIDC claim: given_name</li> </ul> </li> <li>Family Name<ul> <li>OIDC claim: family_name</li> </ul> </li> <li>Affiliation<ul> <li>OIDC claim: eduperson_scoped_affiliation</li> <li>OIDC claim: voperson_external_affiliation</li> </ul> </li> <li>Home Organization<ul> <li>OIDC claim: schac_home_organization</li> </ul> </li> <li>Assurance<ul> <li>OIDC claim: eduperson_assurance</li> <li>Assurance attribute is mandatory from March 1st, 2023</li> <li>The following letter was sent to the federations:   Assurance letter</li> </ul> </li> </ul>"},{"location":"idp_integration/requirements-direct/","title":"Requirements for IdPs integrated directly","text":"<p>If the IdP is connected to one of the R&amp;E Federations but is not published in eduGAIN, then please advise the IdP operator to request their IdP to be published to the eduGAIN metadata.</p> <p>IdPs that are not connected to an R&amp;E federation, need to be in one of the eligible categories in order to be integrated on MyAccessID:</p> <ul> <li>Recognised community platforms that require access to resources using MyAccessID;</li> <li>High Performance Computing facilities which operate their Identity Management Systems.</li> </ul> <p>If the IdP you wish to integrate is not connected to an R&amp;E Federation and does not fit in any of the above categories, please contact us.</p>"},{"location":"idp_integration/requirements-direct/#supported-protocols","title":"Supported Protocols","text":"<p>The IdP MUST support one of the following protocols:</p> <ul> <li>OIDC</li> <li>SAML2</li> </ul>"},{"location":"idp_integration/requirements-direct/#attribute-release-requirements","title":"Attribute release requirements","text":"<p>IdPs must release the following attributes for users to successfully complete registration and use MyAccessID and consequently PUHURI:</p> <ul> <li>Email </li> <li>Name, that can be sent as :</li> <li>Common Name or </li> <li>Display Name or</li> <li>Given Name and Family Name</li> <li>Identifier, that can be sent as: </li> <li>subject-id or</li> <li>pairwise-id or</li> <li>persistent name-id or</li> </ul> <p>IdPs are required to release also the following attributes for users to successfully use services connected to PUHURI:</p> <ul> <li>Affiliation</li> <li>Home Organization</li> <li>Assurance  - attribute will become mandatory in 2022 (date TBD)</li> <li>Community Identifier</li> </ul> <p>Please refer to Attribute formats for specification of accepted attribute formats.</p>"},{"location":"idp_integration/requirements-direct/#level-of-assurance-requirements","title":"Level of Assurance requirements","text":"<p>Access to services connected to PUHURI is allowed only with use of identities that fulfil certain identity assurance criteria. To express the required assurance levels, the REFEDS Assurance suite is used. </p> <p>Requirements are defined for two aspects of identity assurance: </p> <ul> <li>Identifier uniqueness to ensure unambiguous identification of users</li> <li>Identity proofing and credential issuance, renewal, and replacement to ensure that identity trustworthy represents right natural person </li> </ul> <p>Level of assurance for an identity issued to a user is expressed at the time of user authentication by the IdP sending eduPersonAssurance attribute with following values:</p> <ul> <li>https://refeds.org/assurance/ID/UNIQUE; or https://refeds.org/assurance/ID/eppn-unique-no-reassign, and</li> <li>https://refeds.org/assurance/IAP/medium or https://refeds.org/assurance/IAP/high</li> </ul>"},{"location":"idp_integration/requirements-edugain/","title":"Requirements for IdPs integrated through eduGAIN","text":"<p>In order for IdPs available in eduGAIN to be successfully integrated with MyAccessID and PUHURI, they must fulfil requirements described in this page.</p>"},{"location":"idp_integration/requirements-edugain/#supported-protocols","title":"Supported Protocols","text":"<p>IdPs from eduGAIN MUST use the SAML2 protocol. </p>"},{"location":"idp_integration/requirements-edugain/#attribute-release-requirements","title":"Attribute release requirements","text":"<p>IdPs MUST release the following attributes for user to successfully complete registration and use MyAccessID:</p> <ul> <li>Email </li> <li>Name, that can be sent as :</li> <li>Common Name,or </li> <li>Display Name, or</li> <li>Given Name and Family Name</li> <li>Identifier, that can be sent as: </li> <li>subject-id, or</li> <li>pairwise-id, or</li> <li>persistent name-id, or</li> <li>eduPersonPrincipalName*, or</li> <li>eduPersonTargetedID</li> </ul> <p>IdPs are required to release also the following attributes for users to successfully use services connected to PUHURI: </p> <ul> <li>Affiliation </li> <li>Home Organization</li> <li>Assurance - attribute will become mandatory in 2022 (date TBD) </li> </ul> <p>Please refer to Attribute formats  for specification of accepted attribute formats. </p> <p>*Note: In the case the IdP release only eduPersonPrincipalName as the user's identifier, then the IdP MUST either publish the R&amp;S Entity Category in its metadata or release the eduPersonAssurance attribute with value of https://refeds.org/assurance/ID/eppn-unique-no-reassign or the federation in which the IdP has registered has a policy that prohibits the reassignment of the value of the eduPersonPrincipalName attribute.</p>"},{"location":"idp_integration/requirements-edugain/#level-of-assurance-requirements","title":"Level of Assurance requirements","text":"<p>Access to services connected to PUHURI is allowed only with use of identities that fulfil certain identity assurance criteria. To express the required assurance levels, the REFEDS Assurance suite is used. </p> <p>Requirements are defined for two aspects of identity assurance: </p> <ul> <li>Identifier uniqueness to ensure unambiguous identification of users;</li> <li>Identity proofing and credential issuance, renewal, and replacement to ensure that identity trustworthy represents   right natural person.</li> </ul> <p>Level of assurance for an identity issued to a user is expressed at the time of user authentication by the IdP sending eduPersonAssurance attribute with following values: </p> <ul> <li>https://refeds.org/assurance/ID/UNIQUE; or https://refeds.org/assurance/ID/eppn-unique-no-reassign, and</li> <li>https://refeds.org/assurance/IAP/medium or https://refeds.org/assurance/IAP/high</li> </ul>"},{"location":"idp_integration/requirements-edugain/#entity-categories","title":"Entity categories","text":"<p>IdPs are expected to support the following entity categories:</p> <ul> <li>REFEDS R&amp;S and</li> <li>GEANT CoCo </li> </ul>"},{"location":"idp_integration/use-cases/national-portal-integration/","title":"Integration of National Portals","text":""},{"location":"idp_integration/use-cases/national-portal-integration/#background","title":"Background","text":"<p>National portals are handling allocation of computing resources via national processes. It maintains a local database of users, their roles in the approved projects and the resource allocations of the projects. This article describes actions that a National portal operator needs to do to integrate allocation of LUMI resources via Puhuri Core.</p> <p>When the project and resource allocation of LUMI resources is approved inside the National portal, the project with one or more users and their roles within the project needs to be pushed to Puhuri Core service. When users references are shared from National portal to Puhuri Core, a common identity must be used and that identity is MyAccessID User.</p>"},{"location":"idp_integration/use-cases/national-portal-integration/#overview","title":"Overview","text":"<p>The following steps are needed to integrate your National Portal with Puhuri:</p> <ol> <li>Connect MyAccessID User Identifier with the user profile in the National Portal. This entails:</li> <li>Registration of National Portal with Puhuri AAI proxy as an OIDC client</li> <li>Implementation of user flow where National Portal UI asks user to link MyAccessID Identity (and gets the MyAccessID       User Identifier to store in your National Portal)</li> <li>Implement OIDC flow that enables sharing of MyAccessID User Identifier between MyAccessID and your National Portal</li> <li>Record the MyAccessID User Identifier within the user profile of user at your National Portal.</li> <li>Push the allocation and project membership information to Puhuri Core.</li> </ol> <p>Some of these are described in the following.</p>"},{"location":"idp_integration/use-cases/national-portal-integration/#registration-of-national-portal-with-puhuri-aai-proxy","title":"Registration of National Portal with Puhuri AAI proxy","text":"<p>The process is described at ...TODO: add link to the other doc... National Portal needs to be connected as an OIDC Client, so please use that option when you are registering National Portal at Puhuri AAI proxy. </p> <p>The client library that you use should be able to detect all the setting just by passing the issuer URL (https://webapp.prod.puhuri.eduteams.org or https://webapp.acc.puhuri.eduteams.org) and getting the information from the discovery endpoint. If this is not the case, then you can find the information directly from the discovery endpoint of the OIDC Provider:</p> <ul> <li>https://proxy.prod.puhuri.eduteams.org/.well-known/openid-configuration (for production)</li> <li>https://proxy.acc.puhuri.eduteams.org/.well-known/openid-configuration (for acceptance environment)</li> </ul>"},{"location":"idp_integration/use-cases/national-portal-integration/#implementation-of-user-flow-and-ui-that-asks-user-to-link-myaccessid-identity","title":"Implementation of user flow and UI that asks user to link MyAccessID Identity","text":"<p>In order to support the account linking at your National Portal, you will need to add a few changes to the UI. When a user becomes part of the project that uses allocations on LUMI, you will need to prompt your user to perform the MyAccessID account linking. That can be done at once if the user themselves are taking the action. In other situations, like when a Principal Investigator (PI) adds a project member on their initiative, an email may have to be sent to the user about MyAccessID linking.</p> <p>For example implementation of the UI, you can refer to the implementation at Swedish National Portal SUPR. </p> <p>...TODO: add ScreenShoots .. </p>"},{"location":"idp_integration/use-cases/national-portal-integration/#implement-oidc-flow-that-enables-sharing-of-myaccessid-user-identifier-between-myaccessid-and-your-national-portal","title":"Implement OIDC flow that enables sharing of MyAccessID User Identifier between MyAccessID and your National Portal","text":"<p>This is the OIDC technical implementation that supports the user flow discussed above.</p> <p>You will need to install and use an OIDC client/library at the National Portal. </p> <p>The <code>mod_auth_openidc</code> Apache module can be used. Otherwise, other suitable software that implements the RP part of OIDC can be used. </p> <p>We can provide an example mod_auth_openidc configuration:</p> <pre><code>OIDCProviderMetadataURL https://proxy.acc.puhuri.eduteams.org/.well-known/openid-configuration\nOIDCClientID NOT-SHOWN-HERE\nOIDCClientSecret SECRET-NOT-SHOWN-HERE\nOIDCRedirectURI https://portal.example.org/puhuri/register-redirect/\nOIDCCryptoPassphrase SECRET-NOT-SHOWN-HERE\nOIDCScope \"openid email profile eduperson_entitlement\"\n\n&lt;LocationMatch \"^/(person/register_myaccessid|puhuri/.*)/$\"&gt;\n   AuthType openid-connect\n   Require valid-user\n&lt;/LocationMatch&gt;\n</code></pre> <p>In the example above, the portal page implementing account linking (having <code>mod_auth_oidc</code> send the user to MyAccessID and getting the claims back in environment variables if successful) is at <code>/person/registermyaccessid</code>, while URLs under <code>/puhuri</code> are for use by <code>mod_auth_openidc</code> itself.</p>"},{"location":"user_guides/myaccessid_registration/","title":"MyAccessID account registration","text":"<p>Currently, MyAccessID provides 3 different ways to register account:</p> <ol> <li>via academic institution available in eduGAIN</li> <li>via national identity provider (eIDAS)</li> <li>via eduID Sweden</li> </ol>"},{"location":"user_guides/myaccessid_registration/#create-account-using-your-home-academic-institution","title":"Create account using your home academic institution","text":"<p>In order to use this option, your home organization must be available in eduGAIN. To check that, type your home organization name to search field on MyAccessID login page.</p> <p></p> <p>If you are able to find the correct organization, follow the process to authenticate yourself with your home organization credentials. If everything is correct, you will be redirected back to MyAccessID and you are asked to accept the MyAccessID and Service Provider Terms of Use documents and Privacy Policies.</p> <p></p> <p>If you're not able to find your home organization, please proceed with the Option 2 below.</p>"},{"location":"user_guides/myaccessid_registration/#create-account-using-national-identity-provider-eidas","title":"Create account using national identity provider (eIDAS)","text":"<p>To use eIDAS as authentication method, please choose \"Login with eIDAS\"</p> <p></p> <p>Then you're redirected to eIDAS login page, where you can find available countries.</p> <p></p> <p>By selecting particular country (clicking a flag) you will be forward you to the national login page.  The authentication methods behind the flags are different in each country. It may be that you do not have a possibility to use your country's options.</p> <p>If everything is correct, you will be redirected back to MyAccessID and you are asked to accept the MyAccessID and Service Provider Terms of Use documents and Privacy Policies.</p> <p></p> <p>In case you did not find your flag, please proceed to Option 3 below.</p>"},{"location":"user_guides/myaccessid_registration/#create-account-using-eduid-sweden","title":"Create account using eduID Sweden","text":"<p>For users who do not have  academic identity or supported eIDAS digital identity, it is possible to register a new digital identity with eduID Sweden by selecting this option on MyAccessID login page.</p> <p></p> <p>Then you're forwarded to eduID Sweden login page where you can log in with already existing account or create new one.</p> <p></p> <p>When selecting \"Register\", please use your email and follow the instructions.</p> <p>Note</p> <p>Please remember to use your organizational email, not the private one.</p> <p></p> <p>You're asked to accept the eduID rules and prove that you're a human.</p> <p> </p> <p>You're asked to enter your first name, last name and other relevant information. Required information may change over time.</p> <p>Note</p> <p>There is NO need to put an ID number, mobile phone or anything else in the \u201cidentity\u201d or \u201cadvanced settings\u201d tabs.</p> <p></p> <p>If everything is correct, you're redirected back to MyAccessID to accept Terms of Use documents and Privacy Policies.</p> <p></p>"},{"location":"user_guides/notifications/","title":"Puhuri Portal notifications","text":"<p>Warning</p> <p>Notifications are in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p> Notification type Content Initiator Target group email Allocation request Project PI / Proxy-PI Allocator email Project acceptance/rejection Allocator Project PI / Proxy-PI email Portal maintenance/upgrades Portal operator Project members, allocator email Project member invitation Project PI / Proxy-PI New project member email Project member removal Project PI / Proxy-PI Removed project member email 95% of the allocation quota is used Portal (auto-notification) Project PI / Proxy-PI email Allocation quota is full Portal (auto-notification) Project PI / Proxy-PI email Allocation ending in 15 days Portal (auto-notification) Project members email Project ending in 15 days Portal (auto-notification) Project members"},{"location":"user_guides/usage_reports/","title":"Usage reports","text":"<p>Currently, in Puhuri Portal you are able to see allocations monthly usage. Allocation components (CPU, GPU and storage) are displayed on separate charts.</p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Open your project in Puhuri Portal.</p> </li> <li>Select the allocation that usage report you would like to see.</li> <li>Click \"Usage\" to display the report for this allocation. Use tabs \"CPU Allocation\", \"GPU Allocation\", and \"Storage Allocation\" to see the details.     </li> </ol> <p>To check the current resource allocation limit:</p> <ol> <li>Make sure of being in your Project Workspace </li> </ol> <p></p> <ol> <li>Click \"Plan Details\" to see the plan details for Allocation components (CPU, GPU, and storage).</li> </ol> <p></p>"},{"location":"user_guides/user_guide_dedicated/inviting_members/","title":"Project membership management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p>"},{"location":"user_guides/user_guide_dedicated/inviting_members/#management-of-project-team","title":"Management of project team","text":"<p>Project team contains users with different roles:</p> <ul> <li>Principal Investigator (PI) - The lead researcher and primary contact for the project, also organization owner</li> <li>Co-Principal Investigator (Co-PI) - An individual recognized by the prime institution and the principal investigator (PI) as someone who shares scientific and administrative leadership responsibilities for a project with the PI.</li> <li>Member - Users who work on one or more phases of the project and involved in doing assigned tasks.</li> <li>Guest - Users who are only able to see project related data, not able to modify it.</li> </ul>"},{"location":"user_guides/user_guide_dedicated/inviting_members/#adding-pi-to-organization","title":"Adding PI to organization.","text":"<p>Note</p> <p>This is only allowed to national resource allocator representatives!</p> <ol> <li> <p>Login to Puhuri Portal with MyAccessID.     </p> </li> <li> <p>Select correct organization from \"Select workspace\".</p> </li> <li>Select \"Team\" from left menu.    </li> </ol> <p>4a. If user already has Puhuri account, then click \"Add PI\" and select user from the drop-down list.      </p> <p>4b. If user do not have Puhuri account, then \"Invitations\" and \"Invite user\".      </p>"},{"location":"user_guides/user_guide_dedicated/inviting_members/#adding-project-members","title":"Adding project members","text":""},{"location":"user_guides/user_guide_dedicated/inviting_members/#if-user-already-has-puhuri-account-connected-with-the-organization-then","title":"If user already has Puhuri account connected with the organization, then:","text":"<ol> <li> <p>Login to Puhuri Portal with MyAccessID.    </p> </li> <li> <p>Open project in Puhuri Portal.</p> </li> <li> <p>Select \"Team\" from left menu and click on \"Add member\".     </p> </li> <li> <p>Select correct user, set the role and expiration date if necessary.    </p> </li> <li> <p>Finally, click on \"Add\".</p> </li> <li>User now will get invitation email with the acceptance link.</li> </ol> <p>Note</p> <p>Invitation is valid for 1 week!</p>"},{"location":"user_guides/user_guide_dedicated/inviting_members/#if-user-does-not-have-puhuri-account-then","title":"If user does not have Puhuri account, then:","text":"<ol> <li> <p>Login to Puhuri Portal with MyAccessID.    </p> </li> <li> <p>Select your organization.     </p> </li> <li> <p>Click on \"Invite team member\".     </p> </li> <li> <p>Insert user's email and set the role and project (in case of inviting Co-PI, Member or Guest) for the new user.    </p> </li> <li> <p>Click \"Invite user\".</p> </li> <li>User now will get invitation email with the acceptance link.</li> </ol> <p>Note</p> <p>Invitation is valid for 1 week!</p>"},{"location":"user_guides/user_guide_dedicated/organization_and_project_management/","title":"Organization and project management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p>"},{"location":"user_guides/user_guide_dedicated/organization_and_project_management/#user-guide-for-adding-organizations","title":"User guide for adding organizations","text":"<p>Note</p> <p>Organization creation is only allowed for national resource allocator representatives!</p> <p>Organization in Puhuri Portal context means whatever grouping national resource allocator would like to have. This can mean for example research group, institution, department or working group. Organization has an owner who is project principal investigator (PI). Please note that PIs of the organization can see the project information belonging to that organization and can manage members of the projects. Therefore, if you want to avoid that, you must create a different organizations for the PIs. National resource allocator can assign owners to organizations.</p>"},{"location":"user_guides/user_guide_dedicated/organization_and_project_management/#create-a-new-organization","title":"Create a new organization","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Click on \"Select workspace\" and then \u201cAdd new organization\u201d in the organization selection window.     </p> </li> <li> <p>Fill the form and click \"Create organization\":</p> <ul> <li>Name - Name of the organization</li> <li>Contact email - email of the person, who is responsible for the allocations in that organization</li> <li>Contact phone - contact person\u2019s phone (optional)</li> <li>Website URL - url of the organization (optional)</li> <li>Logo - logo of the organization (optional)    </li> </ul> </li> </ol>"},{"location":"user_guides/user_guide_dedicated/organization_and_project_management/#creation-of-projects","title":"Creation of projects","text":"<p>Project creation is allowed for Principal Investigators (PIs) and Resource Allocators in their organizations.</p> <p>Prerequisites for creating projects:     - User must have a Puhuri account (logged in to Puhuri Portal using MyAccessID)     - Allocator must set PI role to the user in certain organization</p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select your home organization.     </p> </li> <li> <p>Click on \"Add project\".    </p> </li> <li> <p>Fill the necessary fields (fields marked with * are mandatory).</p> <ul> <li>Project name - The original title of the project.</li> <li>Project description - A brief description about the project.</li> <li>OECD FoS code - OECD science field code (more info)</li> <li>End date - this is the end date for using the computational resources.</li> </ul> </li> </ol> <p>Note</p> <p>\"End date\" meaning: the computation in this project is not anymore allowed but the data will be available throughout the data retention period defined by your         service provider (such as LUMI). During the data retention period, the resource state will be in status \"Terminating\".</p> <p></p>"},{"location":"user_guides/user_guide_dedicated/organization_and_project_management/#requesting-an-allocation","title":"Requesting an allocation","text":"<p>To get an allocation via Puhuri Portal, project participants must first request it. Request can be initiated by any user, however it must be approved:</p> <ul> <li>by PI before being sent to Resource Allocator.</li> <li>by Resource Allocator before being sent to Puhuri Core for processing by the service.</li> </ul> <p>Below is an example of requesting an allocation from LUMI supercomputer:</p> <ol> <li> <p>Select \"Service catalog\" from the sidebar menu and select offering that matches your plans.    For LUMI, offerings correspond to access types of EuroHPC:</p> <ul> <li>Extreme Scale Access</li> <li>Regular Access</li> <li>Benchmark Access</li> <li>Development Access</li> <li>Fast Track Access for Academia</li> <li>Fast Track Access for Industry    </li> </ul> </li> <li> <p>Write the name for the resource allocation (NOTE: This name will be visible in accounting data.).    </p> </li> <li> <p>Select correct plan (LUMI common) and write needed allocation quota (CPU, GPU and Storage).</p> </li> <li> <p>Write short description (optional).</p> </li> <li> <p>Click on the \"Add to cart\".</p> </li> <li> <p>Check once more and click on \"Request an approval\" if you not a PI in a project or \"Request\" if you PI.    </p> </li> </ol> <p>After this, Resource allocator will request for resource and be able to approve or reject it.</p>"},{"location":"user_guides/user_guide_dedicated/project_approval/","title":"Projects and allocations approval process","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p> <p>Note</p> <p>Following processes are only allowed to national resource allocator representatives!</p>"},{"location":"user_guides/user_guide_dedicated/project_approval/#approving-project-and-allocation-creation-requests","title":"Approving project and allocation creation requests","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select allocating organization from the \"Select workspace\" list.</p> </li> <li>Click on \u201cPublic services\u201d -&gt; \u201cPublic orders\u201d and then click \u201cApprove\u201d    </li> </ol>"},{"location":"user_guides/user_guide_dedicated/project_approval/#approving-project-and-allocation-update-requests","title":"Approving project and allocation update requests","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select allocating organization from the \"Select workspace\" list.</p> </li> <li>Click on \u201cPublic services\u201d -&gt; \u201cProject updates\u201d and then click \u201cApprove\u201d    </li> </ol>"},{"location":"user_guides/user_guide_dedicated/project_modification/","title":"Projects and allocations management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p>"},{"location":"user_guides/user_guide_dedicated/project_modification/#allocation-update-process","title":"Allocation update process","text":"<p>Note</p> <p>Only project PI or (national) resource allocation representative can send allocation update requests.</p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select organization and then project from the \"Select workspace\" list.</p> </li> <li> <p>Select correct allocation you would like to change.    </p> </li> <li> <p>Select \"Actions\" and then \"Change limits\".    </p> </li> <li> <p>Set new limits and click \"Submit\".    </p> </li> <li> <p>Now national resource allocator has to approve the changes.</p> </li> </ol>"},{"location":"user_guides/user_guide_dedicated/project_modification/#project-end-date-update-process","title":"Project end date update process","text":"<p>Note</p> <p>Only project PI or (national) resource allocation representative can send project end date update requests.</p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select organization and then project from the \"Select workspace\" list.</p> </li> <li>Select \"Projects\" from the left side menu.</li> <li> <p>Select correct project and click \"Details\".    </p> </li> <li> <p>Update project end date and \"Update project details\".    </p> </li> <li> <p>Now the national resource allocator has to approve the changes.</p> </li> </ol>"},{"location":"user_guides/user_guide_shared/membership_management_shared/","title":"Project membership management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p> <p>Project team contains users with different roles:</p> <ul> <li>Co-Principal Investigator (Co-PI) - An individual recognized by the prime institution and the principal investigator (PI) as someone who shares scientific and administrative leadership responsibilities for a project with the PI.</li> <li>Member - Users who work on one or more phases of the project and involved in doing assigned tasks.</li> <li>Guest - Users who are only able to see project related data, not able to modify it.</li> </ul>"},{"location":"user_guides/user_guide_shared/membership_management_shared/#adding-project-members","title":"Adding project members","text":""},{"location":"user_guides/user_guide_shared/membership_management_shared/#new-user-has-puhuri-account","title":"New user has Puhuri account:","text":"<ol> <li> <p>Login to Puhuri Portal with MyAccessID.    </p> </li> <li> <p>Open project in Puhuri Portal.</p> </li> <li> <p>Select \"Team\" from left menu and click on \"Add member\".     </p> </li> <li> <p>Select correct user, set the role and expiration date if necessary.    </p> </li> <li> <p>Finally, click on \"Add\".</p> </li> <li>User now will get invitation email with the acceptance link.</li> </ol> <p>Note</p> <p>Invitation is valid for 1 week!</p>"},{"location":"user_guides/user_guide_shared/membership_management_shared/#new-user-dont-have-puhuri-account","title":"New user don't have Puhuri account:","text":"<ol> <li> <p>Login to Puhuri Portal with MyAccessID.    </p> </li> <li> <p>Select your organization.     </p> </li> <li> <p>Click on \"Invite team member\".     </p> </li> <li> <p>Insert user's email and set the role and project (in case of inviting Co-PI, Member or Guest) for the new user.    </p> </li> <li> <p>Click \"Invite user\".</p> </li> <li>User now will get invitation email with the acceptance link.</li> </ol> <p>Note</p> <p>Invitation is valid for 1 week!</p>"},{"location":"user_guides/user_guide_shared/organization_and_project_management_shared/","title":"Organization and project management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p>"},{"location":"user_guides/user_guide_shared/organization_and_project_management_shared/#user-guide-for-adding-organizations","title":"User guide for adding organizations","text":"<p>Note</p> <p>Organization creation is only allowed for national resource allocator representatives!</p> <p>Organization in Puhuri Portal context means whatever grouping national resource allocator would like to have. This can mean for example research group, institution, department or working group. Organization has an owner who is project principal investigator (PI). National resource allocator can assign owners to organizations.</p>"},{"location":"user_guides/user_guide_shared/organization_and_project_management_shared/#create-a-new-organization","title":"Create a new organization","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Click on \"Select workspace\" and then \u201cAdd new organization\u201d in the organization selection window.     </p> </li> <li> <p>Fill the form and click \"Create organization\":</p> <ul> <li>Name - Name of the organization</li> <li>Contact email - email of the person, who is responsible for the allocations in that organization</li> <li>Contact phone - contact person\u2019s phone (optional)</li> <li>Website URL - url of the organization (optional)</li> <li>Logo - logo of the organization (optional)    </li> </ul> </li> </ol>"},{"location":"user_guides/user_guide_shared/organization_and_project_management_shared/#creation-of-projects","title":"Creation of projects","text":"<p>Project creation is allowed for Principal Investigators (PIs) and Resource Allocators in their organizations.</p> <p>Prerequisites for creating projects:     - User must have a Puhuri account (logged in to Puhuri Portal using MyAccessID)     - Allocator must set PI role to the user in certain organization</p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select your home organization.     </p> </li> <li> <p>Click on \"Add project\".    </p> </li> <li> <p>Fill the necessary fields (fields marked with * are mandatory).</p> <ul> <li>Project name - The original title of the project.</li> <li>Project description - A brief description about the project.</li> <li>OECD FoS code - OECD science field code (more info)</li> <li>End date - this is the end date for using the computational resources.    </li> </ul> </li> </ol>"},{"location":"user_guides/user_guide_shared/organization_and_project_management_shared/#requesting-an-allocation","title":"Requesting an allocation","text":"<p>To get an allocation via Puhuri Portal, project participants must first request it. Request can be initiated by any user, however it must be approved:</p> <ul> <li>by PI before being sent to Resource Allocator.</li> <li>by Resource Allocator before being sent to Puhuri Core for processing by the service.</li> </ul> <p>Below is an example of requesting an allocation from LUMI supercomputer:</p> <ol> <li> <p>Select \"Service catalog\" from the sidebar menu and select offering that matches your plans.    For LUMI, offerings correspond to access types of EuroHPC:</p> <ul> <li>Extreme Scale Access</li> <li>Regular Access</li> <li>Benchmark Access</li> <li>Development Access</li> <li>Fast Track Access for Academia</li> <li>Fast Track Access for Industry    </li> </ul> </li> <li> <p>Write the name for the resource allocation (NOTE: This name will be visible in accounting data.).    </p> </li> <li> <p>Select correct plan (LUMI common) and write needed allocation quota (CPU, GPU and Storage).</p> </li> <li> <p>Write short description (optional).</p> </li> <li> <p>Click on the \"Add to cart\".</p> </li> <li> <p>Check once more and click on \"Request an approval\" if you not a PI in a project or \"Request\" if you PI.    </p> </li> </ol> <p>After this, Resource allocator will request for resource and be able to approve or reject it.</p>"},{"location":"user_guides/user_guide_shared/project_approval_shared/","title":"Projects and allocations approval process","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p> <p>Note</p> <p>Following processes are only allowed to national resource allocator representatives!</p>"},{"location":"user_guides/user_guide_shared/project_approval_shared/#approving-project-and-allocation-creation-requests","title":"Approving project and allocation creation requests","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select allocating organization from the \"Select workspace\" list.</p> </li> <li>Click on \u201cPublic services\u201d -&gt; \u201cPublic orders\u201d and then click \u201cApprove\u201d    </li> </ol>"},{"location":"user_guides/user_guide_shared/project_approval_shared/#approving-project-and-allocation-update-requests","title":"Approving project and allocation update requests","text":"<ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select allocating organization from the \"Select workspace\" list.</p> </li> <li>Click on \u201cPublic services\u201d -&gt; \u201cProject updates\u201d and then click \u201cApprove\u201d    </li> </ol>"},{"location":"user_guides/user_guide_shared/project_modification_shared/","title":"Projects and allocations management","text":"<p>Warning</p> <p>User guide is in development. Early feedback is welcome, send email to ilja.livenson@ut.ee.</p>"},{"location":"user_guides/user_guide_shared/project_modification_shared/#allocation-update-process","title":"Allocation update process","text":"<p>Note</p> <p>Only (national) resource allocation representative can send allocation update requests. </p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select organization and then project from the \"Select workspace\" list.</p> </li> <li> <p>Select correct allocation you would like to change.    </p> </li> <li> <p>Select \"Actions\" and then \"Change limits\".    </p> </li> <li> <p>Set new limits and click \"Submit\".    </p> </li> <li> <p>Now national resource allocator has to approve the changes.</p> </li> </ol>"},{"location":"user_guides/user_guide_shared/project_modification_shared/#project-end-date-update-process","title":"Project end date update process","text":"<p>Note</p> <p>Only (national) resource allocation representative can send project end date update requests. </p> <ol> <li> <p>Login to Puhuri Portal using MyAccessID.    </p> </li> <li> <p>Select organization and then project from the \"Select workspace\" list.</p> </li> <li>Select \"Projects\" from the left side menu.</li> <li> <p>Select correct project and click \"Details\".    </p> </li> <li> <p>Update project end date and \"Update project details\".    </p> </li> <li> <p>Now national resource allocator has to approve the changes.</p> </li> </ol>"}]}